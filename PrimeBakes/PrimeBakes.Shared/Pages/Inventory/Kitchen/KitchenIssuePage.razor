@page "/inventory/kitchen-issue"
@page "/inventory/kitchen-issue/{Id:int}"

@using PrimeBakesLibrary.Models.Common
@using PrimeBakesLibrary.Models.Accounts.Masters
@using PrimeBakesLibrary.Models.Inventory
@using PrimeBakesLibrary.Models.Inventory.Kitchen

<PageTitle>Kitchen Issue - Prime Bakes</PageTitle>

@if (_isLoading)
{
	<SfSpinner @bind-Visible="_isLoading" Label="Page is Loading, Please Wait" />
}
else
{
	<!-- Professional Header Section -->
	<div class="page-header">
		<div class="header-left">
			<img src="images/logo.png" alt="Prime Bakes" class="header-logo" />
			<div class="header-divider"></div>
			<div class="header-text">
				<span class="app-name">Prime Bakes</span>
			</div>
		</div>
		<div class="header-center">
			<h1 class="page-title">Create Kitchen Issue</h1>
			<p class="page-subtitle">Create and manage kitchen issue transactions</p>
		</div>
		<div class="header-right">
			<button class="btn-icon btn-icon-save" @onclick="SaveTransaction" title="Save Transaction">
				<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" />
					<polyline points="17 21 17 13 7 13 7 21" />
					<polyline points="7 3 7 8 15 8" />
				</svg>
			</button>
			<button class="btn-icon" title="Transaction History" @onclick="NavigateToTransactionHistoryPage">
				<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<circle cx="12" cy="12" r="10" />
					<polyline points="12 6 12 12 16 14" />
				</svg>
			</button>
			<button class="btn-icon" @onclick="ResetPage" title="New Kitchen Issue">
				<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<line x1="12" y1="5" x2="12" y2="19" />
					<line x1="5" y1="12" x2="19" y2="12" />
				</svg>
			</button>
			<button class="btn-icon" @onclick='() => NavigationManager.NavigateTo(PageRouteNames.Dashboard)' title="Home">
				<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
					<polyline points="9 22 9 12 15 12 15 22" />
				</svg>
			</button>
			<button class="btn-icon" @onclick='() => NavigationManager.NavigateTo(PageRouteNames.InventoryDashboard)' title="Back">
				<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<path d="M19 12H5M12 19l-7-7 7-7" />
				</svg>
			</button>
		</div>
	</div>

	<!-- Main Content Container -->
	<div class="purchase-container">

		<!-- Top Section: Transaction Summary and Financial Summary Side by Side -->
		<div class="two-column-layout">
			<!-- Transaction Summary Section -->
			<div class="section-card">
				<div class="section-header">
					<div class="section-title-wrapper">
						<svg class="section-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
							<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
							<polyline points="14 2 14 8 20 8" />
							<line x1="16" y1="13" x2="8" y2="13" />
							<line x1="16" y1="17" x2="8" y2="17" />
							<polyline points="10 9 9 9 8 9" />
						</svg>
						<h2 class="section-title">Transaction Summary</h2>
					</div>
				</div>
				<div class="section-body">
					<div class="form-grid-transaction">
						<!-- Company -->
						<div class="form-field">
							<label class="field-label">
								Company <span class="required">*</span>
							</label>
							<SfAutoComplete Value="@_selectedCompany"
											TValue="CompanyModel"
											TItem="CompanyModel"
											DataSource="@_companies"
											
											Placeholder="Select a Company"
											FloatLabelType="FloatLabelType.Never"
											AllowFiltering="true"
											FilterType="Syncfusion.Blazor.DropDowns.FilterType.Contains"
											CssClass="custom-autocomplete">
								<AutoCompleteEvents TItem="CompanyModel" TValue="CompanyModel" ValueChange="OnCompanyChanged" />
								<AutoCompleteFieldSettings Value="Name" />
							</SfAutoComplete>
						</div>

						<!-- Party -->
						<div class="form-field">
							<label class="field-label">
								Kitchen <span class="required">*</span>
							</label>
							<SfAutoComplete Value="@_selectedKitchen"
											TValue="KitchenModel"
											TItem="KitchenModel"
											DataSource="@_kitchens"
											
											Placeholder="Select a Kitchen"
											FloatLabelType="FloatLabelType.Never"
											AllowFiltering="true"
											FilterType="Syncfusion.Blazor.DropDowns.FilterType.Contains"
											CssClass="custom-autocomplete">
								<AutoCompleteEvents TItem="KitchenModel" TValue="KitchenModel" ValueChange="OnKitchenChanged" />
								<AutoCompleteFieldSettings Value="Name" />
							</SfAutoComplete>
						</div>

						<!-- Transaction Date and Financial Year -->
						<div class="form-field">
							<label class="field-label">
								Transaction Date <span class="required">*</span> / Financial Year
							</label>
							<div class="date-year-wrapper">
								<SfDatePicker Value="@_kitchenIssue.TransactionDateTime"
											  TValue="DateTime"
											  Format="dd/MM/yy"
											  Placeholder="Select Date"
											  FloatLabelType="FloatLabelType.Never"
											  CssClass="custom-datepicker">
									<DatePickerEvents TValue="DateTime" ValueChange="OnTransactionDateChanged" />
								</SfDatePicker>
								<SfTextBox Value="@($"{_selectedFinancialYear?.StartDate:yyyy} to {_selectedFinancialYear?.EndDate:yyyy}")"
										   Readonly="true"
										   Placeholder="Financial Year"
										   FloatLabelType="FloatLabelType.Never"
										   CssClass="custom-textbox readonly-field" />
							</div>
						</div>

						<!-- Transaction No -->
						<div class="form-field">
							<label class="field-label">
								Transaction No
							</label>
							<div class="transaction-no-wrapper">
								<SfTextBox @bind-Value="_kitchenIssue.TransactionNo"
										   Placeholder="Enter Transaction No"
										   FloatLabelType="FloatLabelType.Never"
										   Readonly="true"
										   CssClass="custom-textbox readonly-field" />
							</div>
						</div>

						<!-- Total Amount -->
						<div class="form-field">
							<label class="field-label">
								Total Amount
							</label>
							<div class="transaction-no-wrapper">
								<SfNumericTextBox Value="@_kitchenIssue.TotalAmount"
											  Readonly="true"
											  TValue="decimal"
											  ShowSpinButton="false"
											  Placeholder="0.00"
											  FloatLabelType="FloatLabelType.Never"
											  CssClass="custom-numeric total-field" />
							</div>
						</div>

						<!-- Remarks -->
						<div class="form-field form-field-span-3">
							<label class="field-label">
								Remarks / Narration
							</label>
							<SfTextBox @bind-Value="_kitchenIssue.Remarks"
									   Multiline="true"
									   Placeholder="Enter remarks..."
									   FloatLabelType="FloatLabelType.Never"
									   CssClass="custom-textbox textarea-field-small" />
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Add to Cart Section -->
		<div class="section-card">
			<div class="section-header">
				<div class="section-title-wrapper">
					<svg class="section-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
						<circle cx="9" cy="21" r="1" />
						<circle cx="20" cy="21" r="1" />
						<path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" />
					</svg>
					<h2 class="section-title">Add Item to Cart</h2>
				</div>
			</div>
			<div class="section-body">
				<!-- Single Row: All Components -->
				<div class="cart-row">
					<div class="cart-field cart-field-item">
						<label class="cart-label">Item <span class="required">*</span></label>
						<SfAutoComplete @ref="_sfItemAutoComplete"
										Value="@_selectedRawMaterial"
										TValue="RawMaterialModel ?"
										TItem="RawMaterialModel"
										DataSource="@_rawMaterials"
										
										Placeholder="Select Item"
										FloatLabelType="FloatLabelType.Never"
										AllowFiltering="true"
										FilterType="Syncfusion.Blazor.DropDowns.FilterType.Contains"
										CssClass="custom-autocomplete">
							<AutoCompleteEvents TItem="RawMaterialModel" TValue="RawMaterialModel ?" ValueChange="OnItemChanged" />
							<AutoCompleteFieldSettings Value="Name" />
						</SfAutoComplete>
					</div>

					<div class="cart-field cart-field-stock">
						<label class="cart-label">Current Stock</label>
						<SfNumericTextBox Value="@(_stockSummary.FirstOrDefault(s => s.RawMaterialId == _selectedRawMaterial?.Id)?.ClosingStock ?? 0)"
										  TValue="decimal"
										  Readonly="true"
										  ShowSpinButton="false"
										  Placeholder="0.00"
										  FloatLabelType="FloatLabelType.Never"
										  CssClass="custom-numeric readonly-field stock-field" />
					</div>

					<div class="cart-field cart-field-small">
						<label class="cart-label">Qty</label>
						<SfNumericTextBox Value="@_selectedCart.Quantity"
										  TValue="decimal"
										  Min="0"
										  ShowSpinButton="false"
										  Placeholder="0.00"
										  FloatLabelType="FloatLabelType.Never"
										  CssClass="custom-numeric editable-field">
							<NumericTextBoxEvents TValue="decimal" ValueChange="OnItemQuantityChanged" />
						</SfNumericTextBox>
					</div>

					<div class="cart-field cart-field-small">
						<label class="cart-label">UOM</label>
						<SfTextBox @bind-Value="_selectedCart.UnitOfMeasurement"
								   Placeholder="UOM..."
								   FloatLabelType="FloatLabelType.Never"
								   CssClass="custom-textbox identification-input" />
					</div>

					<div class="cart-field cart-field-small">
						<label class="cart-label">Rate</label>
						<SfNumericTextBox Value="@_selectedCart.Rate"
										  TValue="decimal"
										  Min="0"
										  ShowSpinButton="false"
										  Placeholder="0.00"
										  FloatLabelType="FloatLabelType.Never"
										  CssClass="custom-numeric editable-field">
							<NumericTextBoxEvents TValue="decimal" ValueChange="OnItemRateChanged" />
						</SfNumericTextBox>
					</div>

					<div class="cart-field cart-field-remarks">
						<label class="cart-label">Remarks</label>
						<SfTextBox @bind-Value="_selectedCart.Remarks"
								   Placeholder="Item Narration..."
								   FloatLabelType="FloatLabelType.Never"
								   CssClass="custom-textbox identification-input" />
					</div>

					<div class="cart-field cart-field-total">
						<label class="cart-label">Total</label>
						<div class="total-display-inline">
							<span class="amount-value">@_selectedCart.Total.ToString("N2")</span>
						</div>
					</div>

					<div class="cart-field cart-field-button">
						<label class="cart-label" style="visibility: hidden;">Action</label>
						<button class="btn-add" @onclick="AddItemToCart">
							<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
								<line x1="12" y1="5" x2="12" y2="19" />
								<line x1="5" y1="12" x2="19" y2="12" />
							</svg>
							<span>Add</span>
						</button>
					</div>
				</div>
			</div>
		</div>

		<!-- Cart Items Grid Section -->
		<div class="section-card">
			<div class="section-header">
				<div class="section-title-wrapper">
					<svg class="section-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
						<path d="M3 3h7a3 3 0 0 1 3 3v14a3 3 0 0 1-3 3H3V3z" />
						<path d="M14 3h7v17h-7V3z" />
					</svg>
					<h2 class="section-title">Kitchen Issue Items</h2>
				</div>
			</div>
			<div class="section-body grid-body">
				<SfGrid ID="_sfCartGrid"
						@ref="_sfCartGrid"
						DataSource="_cart"
						AllowTextWrap="true"
						AllowPaging="false"
						AllowSorting="true"
						AllowResizing="true"
						AllowFiltering="true"
						GridLines="GridLine.Horizontal"
						CssClass="professional-grid"
						Toolbar="@(new List<string>() { "Search" })">

					<GridFilterSettings Type="Syncfusion.Blazor.Grids.FilterType.Excel" />

					<GridAggregates>
						<GridAggregate>
							<GridAggregateColumns>
								<GridAggregateColumn Field="ItemName" Type="AggregateType.Count">
									<FooterTemplate>
										@{
											var aggregate = (context as AggregateTemplateContext);
										}
										<div class="aggregate-label">
											<strong>Total Items: @aggregate.Count</strong>
										</div>
									</FooterTemplate>
								</GridAggregateColumn>
								<GridAggregateColumn Field="Quantity" Type="AggregateType.Sum">
									<FooterTemplate>
										@{
											var aggregate = (context as AggregateTemplateContext);
											var sum = aggregate.Sum != null ? Convert.ToDecimal(aggregate.Sum) : 0m;
										}
										<div class="aggregate-value">
											<strong>@sum.ToString("N2")</strong>
										</div>
									</FooterTemplate>
								</GridAggregateColumn>
								<GridAggregateColumn Field="Total" Type="AggregateType.Sum">
									<FooterTemplate>
										@{
											var aggregate = (context as AggregateTemplateContext);
											var sum = aggregate.Sum != null ? Convert.ToDecimal(aggregate.Sum) : 0m;
										}
										<div class="aggregate-value aggregate-total">
											<strong>@sum.ToString("N2")</strong>
										</div>
									</FooterTemplate>
								</GridAggregateColumn>
							</GridAggregateColumns>
						</GridAggregate>
					</GridAggregates>

					<GridColumns>
						<GridColumn HeaderText="Actions" Width="100" TextAlign="TextAlign.Center">
							<Template>
								@{
									var item = (context as dynamic);
									<div class="grid-actions">
										<button class="btn-grid-action btn-edit" title="Edit Item" @onclick="@(() => EditCartItem(item))">
											<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
												<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
												<path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" />
											</svg>
										</button>
										<button class="btn-grid-action btn-delete" title="Remove Item" @onclick="@(() => RemoveItemFromCart(item))">
											<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
												<polyline points="3 6 5 6 21 6" />
												<path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
												<line x1="10" y1="11" x2="10" y2="17" />
												<line x1="14" y1="11" x2="14" y2="17" />
											</svg>
										</button>
									</div>
								}
							</Template>
						</GridColumn>
						<GridColumn Field="ItemName" HeaderText="Item Name" Width="200" />
						<GridColumn Field="UnitOfMeasurement" HeaderText="UOM" Width="80" TextAlign="TextAlign.Center" />
						<GridColumn Field="Quantity" HeaderText="Qty" Width="100" TextAlign="TextAlign.Right" Format="N2" />
						<GridColumn Field="Rate" HeaderText="Rate" Width="110" TextAlign="TextAlign.Right" Format="N2" />
						<GridColumn Field="Total" HeaderText="Total" Width="130" TextAlign="TextAlign.Right" Format="N2">
							<Template>
								@{
									var item = (context as dynamic);
									<span class="grid-total">@item.Total.ToString("N2")</span>
								}
							</Template>
						</GridColumn>
						<GridColumn Field="Remarks" HeaderText="Remarks" Width="150" />
					</GridColumns>
				</SfGrid>
			</div>
		</div>
	</div>
}

<SfToast @ref="_sfErrorToast"
		 ID="_sfErrorToast"
		 Title="@_errorTitle"
		 Content="@_errorMessage"
		 Timeout="5000">
	<ToastPosition X="Right" Y="Top" />
	<ToastShowAnimationSettings Effect="ToastEffect.SlideLeftIn" />
	<ToastHideAnimationSettings Effect="ToastEffect.SlideRightOut" />
</SfToast>

<SfToast @ref="_sfSuccessToast"
		 ID="_sfSuccessToast"
		 Title="@_successTitle"
		 Content="@_successMessage"
		 Timeout="5000">
	<ToastPosition X="Right" Y="Top" />
	<ToastShowAnimationSettings Effect="ToastEffect.SlideLeftIn" />
	<ToastHideAnimationSettings Effect="ToastEffect.SlideRightOut" />
</SfToast>

<style>
	* {
		box-sizing: border-box;
	}

	/* Professional Header Section */
	.page-header {
		position: sticky;
		top: 0;
		z-index: 1000;
		background: #ffffff;
		border-bottom: 2px solid #e2e8f0;
		padding: 16px 32px;
		display: grid;
		grid-template-columns: 1fr auto 1fr;
		align-items: center;
		gap: 24px;
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
		min-height: 72px;
	}

	.header-left {
		display: flex;
		align-items: center;
		gap: 16px;
	}

	.header-logo {
		width: 40px;
		height: 40px;
		flex-shrink: 0;
	}

	.header-divider {
		width: 1px;
		height: 32px;
		background: #e2e8f0;
		flex-shrink: 0;
	}

	.header-text {
		display: flex;
		align-items: center;
		font-size: 16px;
		color: #0f172a;
		font-weight: 600;
	}

	.app-name {
		color: #0f172a;
		font-weight: 600;
		letter-spacing: 0.5px;
	}

	.header-center {
		text-align: center;
	}

	.page-title {
		font-size: 20px;
		font-weight: 600;
		color: #0f172a;
		margin: 0;
		letter-spacing: -0.3px;
	}

	.page-subtitle {
		font-size: 13px;
		color: #64748b;
		margin: 4px 0 0 0;
		font-weight: 400;
	}

	.header-right {
		display: flex;
		align-items: center;
		justify-content: flex-end;
		gap: 8px;
	}

	.btn-icon {
		width: 40px;
		height: 40px;
		display: flex;
		align-items: center;
		justify-content: center;
		border: 1px solid #e2e8f0;
		background: #ffffff;
		border-radius: 8px;
		cursor: pointer;
		transition: all 0.2s ease;
		color: #64748b;
	}

		.btn-icon:hover {
			background: #f8fafc;
			border-color: #3b82f6;
			color: #3b82f6;
		}

		.btn-icon:active {
			transform: scale(0.95);
		}

	.btn-icon-save {
		color: #10b981;
		border-color: #10b981;
	}

		.btn-icon-save:hover {
			background: #ecfdf5;
			border-color: #059669;
			color: #059669;
		}

	/* Main Container */
	.purchase-container {
		padding: 16px 32px;
		max-width: 1920px;
		margin: 0 auto;
		background: #f8fafc;
		min-height: calc(100vh - 72px);
	}

	/* Two Column Layout */
	.two-column-layout {
		display: flex;
		flex-direction: column;
		gap: 16px;
		margin-bottom: 16px;
	}

		.two-column-layout > :first-child {
			flex: 1;
		}

		.two-column-layout > :last-child {
			flex: 1;
		}

	/* Section Card Styles */
	.section-card {
		background: #ffffff;
		border-radius: 12px;
		border: 1px solid #e2e8f0;
		box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
		margin-bottom: 16px;
		overflow: hidden;
	}

	.section-header {
		padding: 16px 20px;
		border-bottom: 1px solid #e2e8f0;
		background: linear-gradient(to bottom, #ffffff 0%, #f8fafc 100%);
	}

	.section-title-wrapper {
		display: flex;
		align-items: center;
		gap: 12px;
	}

	.section-icon {
		color: #3b82f6;
		flex-shrink: 0;
	}

	.section-title {
		font-size: 16px;
		font-weight: 600;
		color: #0f172a;
		margin: 0;
		letter-spacing: -0.2px;
	}

	.section-body {
		padding: 16px 20px;
	}

	/* Form Grid Layout */
	.form-grid {
		display: grid;
		grid-template-columns: repeat(2, 1fr);
		gap: 16px 20px;
	}

	.form-grid-single {
		display: grid;
		grid-template-columns: repeat(2, 1fr);
		gap: 16px 20px;
	}

	.form-grid-transaction {
		display: grid;
		grid-template-columns: repeat(4, 1fr);
		gap: 16px 20px;
	}

	.form-field {
		display: flex;
		flex-direction: column;
		gap: 6px;
	}

	.form-field-full {
		grid-column: 1 / -1;
	}

	.form-field-span-3 {
		grid-column: span 3;
	}

	.field-label {
		font-size: 13px;
		font-weight: 600;
		color: #334155;
		letter-spacing: 0.1px;
		display: flex;
		align-items: center;
		gap: 4px;
	}

	.required {
		color: #ef4444;
		font-weight: 700;
	}

	/* Transaction Date and Financial Year Wrapper */
	.date-year-wrapper {
		display: flex;
		gap: 12px;
		align-items: stretch;
	}

		.date-year-wrapper > :first-child {
			flex: 1;
		}

		.date-year-wrapper > :last-child {
			flex: 1;
		}

	/* Transaction Number with Auto-generate Checkbox */
	.transaction-no-wrapper {
		display: flex;
		gap: 12px;
		align-items: stretch;
	}

		.transaction-no-wrapper > :first-child {
			flex: 1;
		}

	.auto-generate-checkbox {
		display: flex;
		align-items: center;
		padding: 0 16px;
		background: #f8fafc;
		border: 1px solid #cbd5e1;
		border-radius: 6px;
		white-space: nowrap;
		min-width: 140px;
		justify-content: center;
	}

		.auto-generate-checkbox ::deep .custom-checkbox {
			font-size: 13px;
			font-weight: 500;
		}

	/* Action Buttons */
	.action-buttons {
		display: flex;
		gap: 12px;
	}

	.btn-primary,
	.btn-secondary {
		display: flex;
		align-items: center;
		justify-content: center;
		gap: 8px;
		height: 44px;
		padding: 0 24px;
		border: none;
		border-radius: 8px;
		font-size: 14px;
		font-weight: 600;
		cursor: pointer;
		transition: all 0.2s ease;
		letter-spacing: 0.3px;
		flex: 1;
	}

		.btn-primary svg,
		.btn-secondary svg {
			flex-shrink: 0;
		}

	.btn-primary {
		background: linear-gradient(135deg, #3b82f6 0%, #6366f1 100%);
		color: #ffffff;
		box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
	}

		.btn-primary:hover {
			box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
			transform: translateY(-1px);
			background: linear-gradient(135deg, #2563eb 0%, #4f46e5 100%);
		}

		.btn-primary:active {
			transform: translateY(0);
			box-shadow: 0 1px 4px rgba(59, 130, 246, 0.3);
		}

	.btn-secondary {
		background: #ffffff;
		color: #64748b;
		border: 2px solid #e2e8f0;
		box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
	}

		.btn-secondary:hover {
			background: #f8fafc;
			border-color: #cbd5e1;
			color: #475569;
			box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
			transform: translateY(-1px);
		}

		.btn-secondary:active {
			transform: translateY(0);
			box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
		}

	/* Financial Grid Layout */
	.financial-grid {
		display: flex;
		flex-direction: column;
		gap: 6px;
	}

	.financial-row {
		display: grid;
		grid-template-columns: 100px 1fr;
		align-items: center;
		gap: 10px;
	}

	.financial-row-dual {
		display: grid;
		grid-template-columns: 100px 1fr;
		align-items: center;
		gap: 10px;
	}

	.dual-inputs {
		display: grid;
		grid-template-columns: 1.5fr 1.5fr;
		gap: 8px;
		align-items: center;
	}

	.financial-row.total-row {
		margin-top: 4px;
		padding-top: 8px;
		border-top: 2px solid #e2e8f0;
	}

	.financial-label {
		font-size: 13px;
		font-weight: 500;
		color: #475569;
		text-align: right;
		white-space: nowrap;
	}

	.financial-label-total {
		font-size: 14px;
		font-weight: 700;
		color: #0f172a;
		text-align: right;
		white-space: nowrap;
	}

	.financial-divider {
		height: 1px;
		background: #e2e8f0;
		margin: 4px 0;
	}

	/* Syncfusion Component Overrides */
	.custom-numeric .e-input {
		text-align: right;
	}

	.custom-numeric {
		padding-right: 16px;
	}

	::deep .custom-autocomplete,
	::deep .custom-datepicker,
	::deep .custom-textbox,
	::deep .custom-numeric {
		width: 100%;
	}

		::deep .custom-autocomplete .e-input-group,
		::deep .custom-datepicker .e-input-group,
		::deep .custom-textbox .e-input-group,
		::deep .custom-numeric .e-input-group {
			border: 1px solid #cbd5e1;
			border-radius: 6px;
			background: #ffffff;
			transition: all 0.2s ease;
			height: 40px;
		}

			::deep .custom-autocomplete .e-input-group:hover,
			::deep .custom-datepicker .e-input-group:hover,
			::deep .custom-textbox .e-input-group:hover,
			::deep .custom-numeric .e-input-group:not(.e-disabled):hover {
				border-color: #94a3b8;
			}

			::deep .custom-autocomplete .e-input-group.e-input-focus,
			::deep .custom-datepicker .e-input-group.e-input-focus,
			::deep .custom-textbox .e-input-group.e-input-focus,
			::deep .custom-numeric .e-input-group.e-input-focus {
				border-color: #3b82f6;
				box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
			}

			::deep .custom-autocomplete .e-input-group input,
			::deep .custom-datepicker .e-input-group input,
			::deep .custom-textbox .e-input-group input,
			::deep .custom-textbox .e-input-group textarea,
			::deep .custom-numeric .e-input-group input {
				font-size: 14px;
				color: #1e293b;
				padding: 8px 12px;
			}

				::deep .custom-autocomplete .e-input-group input::placeholder,
				::deep .custom-datepicker .e-input-group input::placeholder,
				::deep .custom-textbox .e-input-group input::placeholder,
				::deep .custom-textbox .e-input-group textarea::placeholder,
				::deep .custom-numeric .e-input-group input::placeholder {
					color: #94a3b8;
				}

	::deep .readonly-field .e-input-group {
		background: #f8fafc;
		cursor: not-allowed;
	}

		::deep .readonly-field .e-input-group input {
			color: #64748b;
			font-weight: 500;
		}

	::deep .stock-field .e-input-group {
		background: #fef3c7;
		border-color: #f59e0b;
	}

		::deep .stock-field .e-input-group input {
			color: #92400e;
			font-weight: 600;
			text-align: center;
		}

	::deep .editable-field .e-input-group {
		border-color: #3b82f6;
		background: #eff6ff;
	}

		::deep .editable-field .e-input-group input {
			font-weight: 600;
			color: #1e40af;
		}

	::deep .small-input .e-input-group {
		width: 100%;
	}

		::deep .small-input .e-input-group input {
			text-align: center;
			padding: 8px;
		}

	::deep .discount-field .e-input-group input {
		color: #dc2626;
		font-weight: 500;
	}

	::deep .total-field .e-input-group {
		background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
		border: 2px solid #3b82f6;
		height: 48px;
	}

		::deep .total-field .e-input-group input {
			font-size: 18px;
			font-weight: 700;
			color: #1e40af;
		}

	::deep .textarea-field .e-input-group {
		height: auto;
		min-height: 80px;
	}

		::deep .textarea-field .e-input-group textarea {
			resize: vertical;
			min-height: 80px;
		}

	::deep .textarea-field-small .e-input-group {
		height: auto;
		min-height: 60px;
	}

		::deep .textarea-field-small .e-input-group textarea {
			resize: vertical;
			min-height: 60px;
		}

	/* Add to Cart Section Styles */
	.cart-row {
		display: grid;
		grid-template-columns: 2fr 1fr 1fr 1fr 1fr 2fr 1.2fr 120px;
		gap: 12px;
		align-items: end;
		margin-bottom: 12px;
	}

	.cart-field {
		display: flex;
		flex-direction: column;
		gap: 4px;
	}

	.cart-field-item {
		/* Item field - 2fr */
	}

	.cart-field-stock {
		/* Current Stock field - 1fr */
	}

	.cart-field-small {
		/* Qty, UOM, Rate - 1fr each */
	}

	.cart-field-remarks {
		/* Remarks - 2fr */
	}

	.cart-field-total {
		/* Total - 1.2fr */
	}

	.cart-field-button {
		/* Add button - 120px */
	}

	.cart-label {
		font-size: 12px;
		font-weight: 600;
		color: #475569;
		text-transform: uppercase;
		letter-spacing: 0.3px;
	}

		.cart-label .required {
			color: #dc2626;
			margin-left: 2px;
		}

	::deep .cart-field .e-input-group,
	::deep .cart-field .custom-numeric .e-input-group,
	::deep .cart-field .custom-autocomplete .e-input-group,
	::deep .cart-field .custom-textbox .e-input-group {
		height: 38px;
		background: #eff6ff;
		border: 1px solid #3b82f6;
	}

		::deep .cart-field .e-input-group input,
		::deep .cart-field .custom-numeric .e-input-group input,
		::deep .cart-field .custom-autocomplete .e-input-group input,
		::deep .cart-field .custom-textbox .e-input-group input {
			font-size: 14px;
			font-weight: 500;
			color: #1e293b;
			padding: 8px 12px;
		}

	.total-display-inline {
		height: 38px;
		display: flex;
		align-items: center;
		justify-content: center;
		padding: 8px 12px;
		background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
		border: 2px solid #3b82f6;
		border-radius: 6px;
	}

		.total-display-inline .amount-value {
			font-size: 16px;
			font-weight: 700;
			color: #1e40af;
		}

	.btn-add {
		height: 38px;
		padding: 0 16px;
		display: flex;
		align-items: center;
		justify-content: center;
		gap: 6px;
		background: linear-gradient(135deg, #3b82f6 0%, #6366f1 100%);
		color: #ffffff;
		border: none;
		border-radius: 6px;
		font-weight: 600;
		font-size: 14px;
		cursor: pointer;
		transition: all 0.2s ease;
		box-shadow: 0 2px 4px rgba(59, 130, 246, 0.2);
		white-space: nowrap;
		width: 100%;
	}

		.btn-add:hover {
			transform: translateY(-1px);
			box-shadow: 0 4px 8px rgba(59, 130, 246, 0.3);
		}

		.btn-add:active {
			transform: scale(0.98);
		}

		.btn-add svg {
			flex-shrink: 0;
		}

	/* Checkbox Wrapper in Cart Row */
	.checkbox-wrapper {
		height: 38px;
		display: flex;
		align-items: center;
		padding: 0 12px;
		background: #f8fafc;
		border: 1px solid #cbd5e1;
		border-radius: 6px;
	}

	::deep .checkbox-wrapper .custom-checkbox {
		font-size: 13px;
		font-weight: 500;
	}

	/* Removed cart-amounts-row - all fields now in single cart-row */

			.amount-display.total-display .amount-value {
				color: #1e40af;
				font-size: 16px;
			}

	::deep .identification-field .identification-input .e-input-group {
		height: 38px;
		background: #ffffff;
		border: 1px solid #cbd5e1;
	}

		::deep .identification-field .identification-input .e-input-group input {
			font-size: 13px;
			color: #64748b;
			font-weight: 500;
			padding: 8px 12px;
		}

			::deep .identification-field .identification-input .e-input-group input::placeholder {
				color: #94a3b8;
				font-style: italic;
			}

	.amount-label {
		font-size: 10px;
		font-weight: 600;
		color: #64748b;
		text-transform: uppercase;
		letter-spacing: 0.3px;
	}

	.amount-value {
		font-size: 14px;
		font-weight: 700;
		color: #1e293b;
		text-align: right;
		width: 100%;
		display: block;
	}

		.amount-value.discount-amt {
			color: #dc2626;
		}

	.checkbox-display {
		display: flex;
		align-items: center;
		justify-content: center;
		padding: 8px;
		background: #f8fafc;
		border-radius: 6px;
		border: 1px solid #e2e8f0;
		min-height: 58px;
	}

	::deep .custom-checkbox {
		font-size: 12px;
		font-weight: 500;
	}

		::deep .custom-checkbox label {
			white-space: nowrap;
		}

	/* Professional Grid Styles */
	.e-grid .e-summaryrow .e-summarycell {
		background-color: #deecf9;
	}

	.grid-body {
		padding: 0 !important;
	}

	::deep .professional-grid {
		border: none;
	}

		::deep .professional-grid .e-gridheader {
			background: linear-gradient(to bottom, #f8fafc 0%, #f1f5f9 100%);
			border-bottom: 2px solid #e2e8f0;
		}

		::deep .professional-grid .e-headercell {
			background: transparent;
			color: #475569;
			font-weight: 600;
			font-size: 12px;
			text-transform: uppercase;
			letter-spacing: 0.3px;
			border-right: 1px solid #e2e8f0;
			padding: 12px 8px;
		}

			::deep .professional-grid .e-headercell:last-child {
				border-right: none;
			}

		::deep .professional-grid .e-gridcontent {
			background: #ffffff;
		}

		::deep .professional-grid .e-row {
			transition: background-color 0.2s ease;
		}

			::deep .professional-grid .e-row:hover {
				background-color: #f8fafc;
			}

			::deep .professional-grid .e-row.e-altrow {
				background-color: #fafbfc;
			}

				::deep .professional-grid .e-row.e-altrow:hover {
					background-color: #f8fafc;
				}

		::deep .professional-grid .e-rowcell {
			border-right: 1px solid #f1f5f9;
			border-bottom: 1px solid #f1f5f9;
			padding: 10px 8px;
			font-size: 13px;
			color: #1e293b;
		}

			::deep .professional-grid .e-rowcell:last-child {
				border-right: none;
			}

	.grid-discount {
		color: #dc2626;
		font-weight: 600;
	}

	.grid-total {
		color: #1e40af;
		font-weight: 700;
		font-size: 14px;
	}

	.grid-checkbox {
		display: inline-block;
		width: 20px;
		height: 20px;
		line-height: 20px;
		text-align: center;
		border-radius: 4px;
		font-weight: 700;
		font-size: 14px;
	}

	/* Grid Footer Aggregates */
	::deep .professional-grid .e-gridfooter {
		background: linear-gradient(to bottom, #f1f5f9 0%, #e2e8f0 100%);
		border-top: 2px solid #cbd5e1;
	}

	::deep .professional-grid .e-summarycell {
		font-weight: 600;
		color: #1e293b;
		padding: 12px 8px;
		border-right: 1px solid #cbd5e1;
	}

		::deep .professional-grid .e-summarycell:last-child {
			border-right: none;
		}

	.aggregate-label {
		text-align: left;
		font-size: 13px;
		color: #475569;
	}

	.aggregate-value {
		text-align: right;
		font-size: 13px;
		color: #1e293b;
	}

		.aggregate-value.aggregate-discount {
			color: #dc2626;
		}

		.aggregate-value.aggregate-total {
			color: #1e40af;
			font-size: 14px;
		}

			.aggregate-value.aggregate-total strong {
				font-size: 15px;
			}

		.aggregate-label strong,
		.aggregate-value strong {
			font-weight: 700;
		}

	.grid-actions {
		display: flex;
		align-items: center;
		justify-content: center;
		gap: 6px;
	}

	.btn-grid-action {
		width: 32px;
		height: 32px;
		display: flex;
		align-items: center;
		justify-content: center;
		border: 1px solid #e2e8f0;
		background: #ffffff;
		border-radius: 6px;
		cursor: pointer;
		transition: all 0.2s ease;
		padding: 0;
	}

		.btn-grid-action:hover {
			transform: translateY(-1px);
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
		}

		.btn-grid-action:active {
			transform: scale(0.95);
		}

		.btn-grid-action.btn-edit {
			color: #3b82f6;
			border-color: #3b82f6;
		}

			.btn-grid-action.btn-edit:hover {
				background: #eff6ff;
				box-shadow: 0 2px 6px rgba(59, 130, 246, 0.2);
			}

		.btn-grid-action.btn-delete {
			color: #dc2626;
			border-color: #dc2626;
		}

			.btn-grid-action.btn-delete:hover {
				background: #fef2f2;
				box-shadow: 0 2px 6px rgba(220, 38, 38, 0.2);
			}

	/* Dialog Button Styles */
	.dialog-btn {
		display: flex;
		align-items: center;
		justify-content: center;
		gap: 8px;
		padding: 12px 20px;
		border: none;
		border-radius: 8px;
		font-size: 14px;
		font-weight: 600;
		cursor: pointer;
		transition: all 0.2s ease;
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
	}

		.dialog-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 4px 8px rgba(0, 0, 0, 0.12);
		}

		.dialog-btn:active {
			transform: translateY(0);
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
		}

		.dialog-btn svg {
			flex-shrink: 0;
		}

	.dialog-btn-primary {
		background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
		color: white;
	}

		.dialog-btn-primary:hover {
			background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
		}

	.dialog-btn-info {
		background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
		color: white;
	}

		.dialog-btn-info:hover {
			background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
		}

	.dialog-btn-danger {
		background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
		color: white;
	}

		.dialog-btn-danger:hover {
			background: linear-gradient(135deg, #b91c1c 0%, #991b1b 100%);
		}

	/* Custom Uploader Styles */
	::deep .custom-uploader .e-upload {
		border: none;
		background: transparent;
	}

	::deep .custom-uploader .e-file-select-wrap {
		padding: 0;
	}

	::deep .custom-uploader .e-file-select {
		background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
		color: white;
		border: none;
		padding: 12px 32px;
		border-radius: 8px;
		font-weight: 600;
		font-size: 14px;
		box-shadow: 0 2px 6px rgba(59, 130, 246, 0.3);
		transition: all 0.2s ease;
	}

		::deep .custom-uploader .e-file-select:hover {
			background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
			transform: translateY(-2px);
			box-shadow: 0 4px 10px rgba(59, 130, 246, 0.4);
		}

	::deep .custom-uploader .e-file-drop {
		border: none;
		background: transparent;
		min-height: auto;
	}

	::deep .custom-uploader .e-upload-files {
		margin-top: 16px;
		border: 1px solid #e2e8f0;
		border-radius: 8px;
		padding: 12px;
		background: white;
	}

	::deep .custom-uploader .e-upload-file-list {
		padding: 8px;
		background: #f8fafc;
		border-radius: 6px;
		border: 1px solid #e2e8f0;
	}

	::deep .custom-uploader .e-file-name {
		font-size: 14px;
		color: #0f172a;
		font-weight: 500;
	}

	::deep .custom-uploader .e-file-size {
		font-size: 12px;
		color: #64748b;
	}

	::deep .custom-uploader .e-file-status {
		font-size: 12px;
		color: #10b981;
		font-weight: 600;
	}

	::deep .custom-uploader .e-icons.e-file-delete-btn,
	::deep .custom-uploader .e-icons.e-file-remove-btn {
		color: #dc2626;
		font-size: 18px;
		transition: all 0.2s ease;
	}

		::deep .custom-uploader .e-icons.e-file-delete-btn:hover,
		::deep .custom-uploader .e-icons.e-file-remove-btn:hover {
			color: #991b1b;
			transform: scale(1.1);
		}

	::deep .custom-uploader .e-upload-progress-wrap {
		height: 4px;
		background: #e2e8f0;
		border-radius: 2px;
		overflow: hidden;
	}

	::deep .custom-uploader .e-upload-progress-bar {
		background: linear-gradient(90deg, #3b82f6 0%, #8b5cf6 100%);
		height: 100%;
	}

	/* Empty Grid State */
	::deep .professional-grid .e-emptyrow {
		text-align: center;
		padding: 48px 24px;
		color: #94a3b8;
		font-size: 14px;
	}
</style>