@page "/sales/stock-transfer"
@page "/sales/stock-transfer/{Id:int}"

@using PrimeBakesLibrary.Models.Accounts.Masters
@using PrimeBakesLibrary.Models.Common
@using PrimeBakesLibrary.Models.Sales.Product
@using PrimeBakesLibrary.Models.Sales.StockTransfer

<PageTitle>Stock Transfer - PrimeBakes</PageTitle>

@if (_isLoading)
{
	<SfSpinner @bind-Visible="_isLoading" Label="Page is Loading, Please Wait" />
}
else
{
	<!-- Professional Header Section -->
	<div class="page-header">
		<div class="header-left">
			<img src="images/logo.png" alt="PrimeBakes" class="header-logo" />
			<div class="header-divider"></div>
			<div class="header-text">
				<span class="app-name">PrimeBakes</span>
			</div>
		</div>
		<div class="header-center">
			<h1 class="page-title">Stock Transfer</h1>
			<p class="page-subtitle">Move stock between locations</p>
		</div>
		<div class="header-right">
			<button class="btn-icon btn-icon-save" @onclick="SaveTransaction" title="Save Transaction (Ctrl + S)" disabled="@_isProcessing">
				<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
					 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" />
					<polyline points="17 21 17 13 7 13 7 21" />
					<polyline points="7 3 7 8 15 8" />
				</svg>
			</button>
			@if (Id.HasValue && Id.Value > 0)
			{
				<button class="btn-icon btn-icon-pdf" @onclick="DownloadInvoice" title="Download Transfer Note (Ctrl + P)" disabled="@_isProcessing">
					<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
						 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
						<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
						<polyline points="14 2 14 8 20 8" />
						<line x1="16" y1="13" x2="8" y2="13" />
						<line x1="16" y1="17" x2="8" y2="17" />
						<line x1="10" y1="9" x2="8" y2="9" />
					</svg>
				</button>
			}
			<button class="btn-icon" @onclick="NavigateToTransactionHistoryPage" title="Transaction History (Ctrl + H)" disabled="@_isProcessing">
				<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
					 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<circle cx="12" cy="12" r="10" />
					<polyline points="12 6 12 12 16 14" />
				</svg>
			</button>
			<button class="btn-icon" @onclick="NavigateToItemReport" title="Item Report (Ctrl + I)" disabled="@_isProcessing">
				<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
					 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<rect x="2" y="7" width="20" height="14" rx="2" ry="2" />
					<path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16" />
				</svg>
			</button>
			<button class="btn-icon" @onclick="ResetPage" title="New Transaction (Ctrl + N)" disabled="@_isProcessing">
				<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
					 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<line x1="12" y1="5" x2="12" y2="19" />
					<line x1="5" y1="12" x2="19" y2="12" />
				</svg>
			</button>
			<button class="btn-icon" @onclick="NavigateToDashboard" title="Home (Ctrl + D)" disabled="@_isProcessing">
				<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
					 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
					<polyline points="9 22 9 12 15 12 15 22" />
				</svg>
			</button>
			<button class="btn-icon" @onclick="NavigateBack" title="Back (Ctrl + B)" disabled="@_isProcessing">
				<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
					 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<path d="M19 12H5M12 19l-7-7 7-7" />
				</svg>
			</button>
		</div>
	</div>

	<!-- Main Content Container -->
	<div class="purchase-container">

		<!-- Top Section: Transaction Summary and Financial Summary Side by Side -->
		<div class="two-column-layout">
			<!-- Transaction Summary Section -->
			<div class="section-card">
				<div class="section-header">
					<div class="section-title-wrapper">
						<svg class="section-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
							 viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
							 stroke-linejoin="round">
							<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
							<polyline points="14 2 14 8 20 8" />
							<line x1="16" y1="13" x2="8" y2="13" />
							<line x1="16" y1="17" x2="8" y2="17" />
							<polyline points="10 9 9 9 8 9" />
						</svg>
						<h2 class="section-title">Transaction Summary</h2>
					</div>
				</div>
				<div class="section-body">
					<div class="form-grid-triple">
						<!-- From Location -->
						<div class="form-field">
							<label class="field-label">
								From Location <span class="required">*</span>
							</label>
							<SfAutoComplete Value="@_selectedLocation" TValue="LocationModel" TItem="LocationModel"
											DataSource="@_locations" Placeholder="Select From Location"
											FloatLabelType="FloatLabelType.Never" AllowFiltering="true"
											FilterType="Syncfusion.Blazor.DropDowns.FilterType.Contains" CssClass="custom-autocomplete">
								<AutoCompleteEvents TItem="LocationModel" TValue="LocationModel"
													ValueChange="OnFromLocationChanged" />
								<AutoCompleteFieldSettings Value="Name" />
							</SfAutoComplete>
						</div>

						<!-- To Location -->
						<div class="form-field">
							<label class="field-label">
								To Location <span class="required">*</span>
							</label>
							<SfAutoComplete Value="@_selectedToLocation" TValue="LocationModel" TItem="LocationModel"
											DataSource="@_locations" Placeholder="Select To Location"
											FloatLabelType="FloatLabelType.Never" AllowFiltering="true"
											FilterType="Syncfusion.Blazor.DropDowns.FilterType.Contains" CssClass="custom-autocomplete">
								<AutoCompleteEvents TItem="LocationModel" TValue="LocationModel"
													ValueChange="OnToLocationChanged" />
								<AutoCompleteFieldSettings Value="Name" />
							</SfAutoComplete>
						</div>

						<!-- Company -->
						<div class="form-field">
							<label class="field-label">
								Company <span class="required">*</span>
							</label>
							<SfAutoComplete Value="@_selectedCompany" TValue="CompanyModel" TItem="CompanyModel"
											DataSource="@_companies" Placeholder="Select a Company"
											FloatLabelType="FloatLabelType.Never" AllowFiltering="true"
											FilterType="Syncfusion.Blazor.DropDowns.FilterType.Contains" CssClass="custom-autocomplete">
								<AutoCompleteEvents TItem="CompanyModel" TValue="CompanyModel"
													ValueChange="OnCompanyChanged" />
								<AutoCompleteFieldSettings Value="Name" />
							</SfAutoComplete>
						</div>

						<!-- Transaction Date -->
						<div class="form-field">
							<label class="field-label">
								Transaction Date <span class="required">*</span>
							</label>
							<SfDatePicker Value="@_stockTransfer.TransactionDateTime" TValue="DateTime" Format="dd/MM/yy"
										  Placeholder="Select Date" FloatLabelType="FloatLabelType.Never"
										  CssClass="custom-datepicker">
								<DatePickerEvents TValue="DateTime" ValueChange="OnTransactionDateChanged" />
							</SfDatePicker>
						</div>

						<!-- Financial Year -->
						<div class="form-field">
							<label class="field-label">
								Financial Year
							</label>
							<SfTextBox Value="@($"{_selectedFinancialYear?.StartDate:yyyy} to {_selectedFinancialYear?.EndDate:yyyy}")"
									   Readonly="true" Placeholder="Financial Year" FloatLabelType="FloatLabelType.Never"
									   CssClass="custom-textbox readonly-field" />
						</div>

						<!-- Transaction No -->
						<div class="form-field">
							<label class="field-label">
								Transaction No
							</label>
							<div class="transaction-no-wrapper">
								<SfTextBox @bind-Value="_stockTransfer.TransactionNo" Placeholder="Transaction No"
										   FloatLabelType="FloatLabelType.Never" Readonly="true"
										   CssClass="custom-textbox readonly-field" />
							</div>
						</div>

						<!-- Remarks -->
						<div class="form-field form-field-full">
							<label class="field-label">
								Remarks / Narration
							</label>
							<SfTextBox @bind-Value="_stockTransfer.Remarks" Multiline="true" Placeholder="Enter remarks..."
									   FloatLabelType="FloatLabelType.Never" CssClass="custom-textbox textarea-field-small" />
						</div>
					</div>
				</div>
			</div>

			<!-- Financial Summary Section -->
			<div class="section-card">
				<div class="section-header">
					<div class="section-title-wrapper">
						<svg class="section-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
							 viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
							 stroke-linejoin="round">
							<line x1="12" y1="1" x2="12" y2="23" />
							<path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" />
						</svg>
						<h2 class="section-title">Financial Summary</h2>
					</div>
				</div>
				<div class="section-body">
					<div class="financial-grid">
						<!-- Sub Total -->
						<div class="financial-row">
							<label class="financial-label">Sub Total</label>
							<SfNumericTextBox Value="@_stockTransfer.TotalAfterTax" Readonly="true" TValue="decimal"
											  ShowSpinButton="false" Placeholder="0.00" FloatLabelType="FloatLabelType.Never"
											  CssClass="custom-numeric readonly-field" />
						</div>

						<!-- Other Charges -->
						<div class="financial-row-dual">
							<label class="financial-label">Other Charges</label>
							<div class="dual-inputs">
								<SfNumericTextBox Value="@_stockTransfer.OtherChargesPercent" TValue="decimal" Max="100" Min="0"
												  Decimals="2" ShowSpinButton="false" Placeholder="%"
												  FloatLabelType="FloatLabelType.Never"
												  CssClass="custom-numeric editable-field small-input">
									<NumericTextBoxEvents TValue="decimal" ValueChange="OnOtherDiscountPercentChanged" />
								</SfNumericTextBox>
								<SfNumericTextBox Value="@_stockTransfer.OtherChargesAmount" Readonly="true" TValue="decimal"
												  ShowSpinButton="false" Placeholder="0.00" FloatLabelType="FloatLabelType.Never"
												  CssClass="custom-numeric readonly-field" />
							</div>
						</div>

						<!-- Discount -->
						<div class="financial-row-dual">
							<label class="financial-label">Discount</label>
							<div class="dual-inputs">
								<SfNumericTextBox Value="@_stockTransfer.DiscountPercent" TValue="decimal" Max="100" Min="0"
												  Decimals="2" ShowSpinButton="false" Placeholder="%"
												  FloatLabelType="FloatLabelType.Never"
												  CssClass="custom-numeric editable-field small-input">
									<NumericTextBoxEvents TValue="decimal" ValueChange="OnDiscountPercentChanged" />
								</SfNumericTextBox>
								<SfNumericTextBox Value="@_stockTransfer.DiscountAmount" Readonly="true" TValue="decimal"
												  ShowSpinButton="false" Placeholder="0.00" FloatLabelType="FloatLabelType.Never"
												  CssClass="custom-numeric readonly-field discount-field" />
							</div>
						</div>

						<!-- Round Off -->
						<div class="financial-row">
							<label class="financial-label">Round Off</label>
							<SfNumericTextBox Value="@_stockTransfer.RoundOffAmount" TValue="decimal" Placeholder="0.00"
											  FloatLabelType="FloatLabelType.Never" CssClass="custom-numeric editable-field">
								<NumericTextBoxEvents TValue="decimal" ValueChange="OnRoundOffAmountChanged" />
							</SfNumericTextBox>
						</div>

						<!-- Total Amount -->
						<div class="financial-row total-row">
							<label class="financial-label-total">Total Amount</label>
							<SfNumericTextBox Value="@_stockTransfer.TotalAmount" Readonly="true" TValue="decimal"
											  ShowSpinButton="false" Placeholder="0.00" FloatLabelType="FloatLabelType.Never"
											  CssClass="custom-numeric total-field" />
						</div>

						<div class="financial-divider"></div>

						<!-- Cash / Card -->
						<div class="dual-inputs">
							<SfNumericTextBox @bind-Value="@_stockTransfer.Cash" TValue="decimal" Min="0" ShowSpinButton="false"
											  Placeholder="Cash" FloatLabelType="FloatLabelType.Always"
											  CssClass="custom-numeric editable-field small-input" />
							<SfNumericTextBox @bind-Value="@_stockTransfer.Card" TValue="decimal" Min="0" ShowSpinButton="false"
											  Placeholder="Card" FloatLabelType="FloatLabelType.Always"
											  CssClass="custom-numeric editable-field small-input" />
						</div>

						<!-- UPI / Credit -->
						<div class="dual-inputs">
							<SfNumericTextBox @bind-Value="@_stockTransfer.UPI" TValue="decimal" Min="0" ShowSpinButton="false"
											  Placeholder="UPI" FloatLabelType="FloatLabelType.Always"
											  CssClass="custom-numeric editable-field small-input" />
							<SfNumericTextBox @bind-Value="@_stockTransfer.Credit" TValue="decimal" Min="0" ShowSpinButton="false"
											  Placeholder="Credit" FloatLabelType="FloatLabelType.Always"
											  CssClass="custom-numeric editable-field small-input" />
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Add to Cart Section -->
		<div class="section-card">
			<div class="section-header">
				<div class="section-title-wrapper">
					<svg class="section-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
						 fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
						<circle cx="9" cy="21" r="1" />
						<circle cx="20" cy="21" r="1" />
						<path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" />
					</svg>
					<h2 class="section-title">Add Item to Transfer</h2>
				</div>
			</div>
			<div class="section-body">
				<!-- First Row: Item Selection and Basic Info -->
				<div class="cart-row">
					<div class="cart-field cart-field-item">
						<label class="cart-label">Item <span class="required">*</span></label>
						<SfAutoComplete @ref="_sfItemAutoComplete" Value="@_selectedProduct"
										TValue="ProductLocationOverviewModel" TItem="ProductLocationOverviewModel"
										DataSource="@_products" Placeholder="Select Item (Ctrl + E)" FloatLabelType="FloatLabelType.Never"
										AllowFiltering="true" FilterType="Syncfusion.Blazor.DropDowns.FilterType.Contains"
										CssClass="custom-autocomplete">
							<AutoCompleteEvents TItem="ProductLocationOverviewModel"
												TValue="ProductLocationOverviewModel" ValueChange="OnItemChanged" />
							<AutoCompleteFieldSettings Value="Name" />
						</SfAutoComplete>
					</div>

					<div class="cart-field cart-field-small">
						<label class="cart-label">Qty</label>
						<SfNumericTextBox Value="@_selectedCart.Quantity" TValue="decimal" Min="0" ShowSpinButton="false"
										  Placeholder="0.00" FloatLabelType="FloatLabelType.Never"
										  CssClass="custom-numeric editable-field">
							<NumericTextBoxEvents TValue="decimal" ValueChange="OnItemQuantityChanged" />
						</SfNumericTextBox>
					</div>

					<div class="cart-field cart-field-small">
						<label class="cart-label">Rate</label>
						<SfNumericTextBox Value="@_selectedCart.Rate" TValue="decimal" Min="0" ShowSpinButton="false"
										  Placeholder="0.00" FloatLabelType="FloatLabelType.Never"
										  CssClass="custom-numeric editable-field">
							<NumericTextBoxEvents TValue="decimal" ValueChange="OnItemRateChanged" />
						</SfNumericTextBox>
					</div>

					<div class="cart-field cart-field-small">
						<label class="cart-label">Disc %</label>
						<SfNumericTextBox Value="@_selectedCart.DiscountPercent" TValue="decimal" Decimals="2" Min="0"
										  Max="100" ShowSpinButton="false" Placeholder="0.00" FloatLabelType="FloatLabelType.Never"
										  CssClass="custom-numeric editable-field">
							<NumericTextBoxEvents TValue="decimal" ValueChange="OnItemDiscountPercentChanged" />
						</SfNumericTextBox>
					</div>

					<div class="cart-field cart-field-small">
						<label class="cart-label">CGST %</label>
						<SfNumericTextBox Value="@_selectedCart.CGSTPercent" TValue="decimal" Decimals="2" Min="0" Max="100"
										  ShowSpinButton="false" Placeholder="0.00" FloatLabelType="FloatLabelType.Never"
										  CssClass="custom-numeric editable-field">
							<NumericTextBoxEvents TValue="decimal" ValueChange="OnItemCGSTPercentChanged" />
						</SfNumericTextBox>
					</div>

					<div class="cart-field cart-field-small">
						<label class="cart-label">SGST %</label>
						<SfNumericTextBox Value="@_selectedCart.SGSTPercent" TValue="decimal" Decimals="2" Min="0" Max="100"
										  ShowSpinButton="false" Placeholder="0.00" FloatLabelType="FloatLabelType.Never"
										  CssClass="custom-numeric editable-field">
							<NumericTextBoxEvents TValue="decimal" ValueChange="OnItemSGSTPercentChanged" />
						</SfNumericTextBox>
					</div>

					<div class="cart-field cart-field-small">
						<label class="cart-label">IGST %</label>
						<SfNumericTextBox Value="@_selectedCart.IGSTPercent" TValue="decimal" Decimals="2" Min="0" Max="100"
										  ShowSpinButton="false" Placeholder="0.00" FloatLabelType="FloatLabelType.Never"
										  CssClass="custom-numeric editable-field">
							<NumericTextBoxEvents TValue="decimal" ValueChange="OnItemIGSTPercentChanged" />
						</SfNumericTextBox>
					</div>

					<div class="cart-field cart-field-button">
						<div class="checkbox-wrapper">
							<SfCheckBox @bind-Checked="_selectedCart.InclusiveTax" Label="Tax Incl." TChecked="bool"
										ValueChange="OnItemInclusiveTaxChanged" CssClass="custom-checkbox" />
						</div>
					</div>
				</div>

				<!-- Second Row: Readonly Amounts Aligned with Percentages -->
				<div class="cart-amounts-row">
					<!-- Item Remarks (below item field) -->
					<div class="amount-field amount-field-item">
						<div class="amount-display identification-field">
							<label class="cart-label">Remarks</label>
							<SfTextBox @bind-Value="_selectedCart.Remarks" Placeholder="Item Narration..."
									   FloatLabelType="FloatLabelType.Never" CssClass="custom-textbox identification-input" />
						</div>
					</div>

					<!-- Spacer for Qty -->
					<div class="amount-field amount-field-small">
						<!-- Spacer -->
					</div>

					<!-- Base Total (below Rate) -->
					<div class="amount-field amount-field-small">
						<div class="amount-display empty-display">
							<span class="amount-label">Base</span>
							<span class="amount-value">@_selectedCart.BaseTotal.ToString("N2")</span>
						</div>
					</div>

					<!-- Discount Amount (below Disc %) -->
					<div class="amount-field amount-field-small">
						<div class="amount-display empty-display">
							<span class="amount-label">Disc Amt</span>
							<span class="amount-value discount-amt">@_selectedCart.DiscountAmount.ToString("N2")</span>
						</div>
					</div>

					<!-- CGST Amount (below CGST %) -->
					<div class="amount-field amount-field-small">
						<div class="amount-display empty-display">
							<span class="amount-label">CGST Amt</span>
							<span class="amount-value">@_selectedCart.CGSTAmount.ToString("N2")</span>
						</div>
					</div>

					<!-- SGST Amount (below SGST %) -->
					<div class="amount-field amount-field-small">
						<div class="amount-display empty-display">
							<span class="amount-label">SGST Amt</span>
							<span class="amount-value">@_selectedCart.SGSTAmount.ToString("N2")</span>
						</div>
					</div>

					<!-- IGST Amount (below IGST %) -->
					<div class="amount-field amount-field-small">
						<div class="amount-display empty-display">
							<span class="amount-label">IGST Amt</span>
							<span class="amount-value">@_selectedCart.IGSTAmount.ToString("N2")</span>
						</div>
					</div>

					<!-- Total and Add Button (below Tax Incl. checkbox) -->
					<div class="amount-field amount-field-medium">
						<div class="amount-display total-display">
							<span class="amount-label">Total</span>
							<span class="amount-value">@_selectedCart.Total.ToString("N2")</span>
						</div>
					</div>

					<!-- Add Button -->
					<div class="amount-field amount-field-button">
						<button class="btn-add" @onclick="AddItemToCart">
							<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
								 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
								<line x1="12" y1="5" x2="12" y2="19" />
								<line x1="5" y1="12" x2="19" y2="12" />
							</svg>
							<span>Add</span>
						</button>
					</div>
				</div>
			</div>
		</div>

		<!-- Cart Items Grid Section -->
		<div class="section-card">
			<div class="section-header">
				<div class="section-title-wrapper">
					<svg class="section-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
						 fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
						<path d="M3 3h7a3 3 0 0 1 3 3v14a3 3 0 0 1-3 3H3V3z" />
						<path d="M14 3h7v17h-7V3z" />
					</svg>
					<h2 class="section-title">Transfer Items</h2>
				</div>
			</div>
			<div class="section-body grid-body">
				<SfGrid ID="_sfCartGrid" @ref="_sfCartGrid" DataSource="_cart" AllowTextWrap="true" AllowPaging="false"
						AllowSorting="true" AllowResizing="true" AllowFiltering="true" GridLines="GridLine.Horizontal"
						CssClass="professional-grid" Toolbar="@(new List<string>() { "Search" })">

					<GridFilterSettings Type="Syncfusion.Blazor.Grids.FilterType.Excel" />

					<GridAggregates>
						<GridAggregate>
							<GridAggregateColumns>
								<GridAggregateColumn Field="ItemName" Type="AggregateType.Count">
									<FooterTemplate>
										@{
											var aggregate = (context as AggregateTemplateContext);
										}
										<div class="aggregate-label">
											<strong>Total Items: @aggregate.Count</strong>
										</div>
									</FooterTemplate>
								</GridAggregateColumn>
								<GridAggregateColumn Field="Quantity" Type="AggregateType.Sum">
									<FooterTemplate>
										@{
											var aggregate = (context as AggregateTemplateContext);
											var sum = aggregate.Sum != null ? Convert.ToDecimal(aggregate.Sum) : 0m;
										}
										<div class="aggregate-value">
											<strong>@sum.ToString("N2")</strong>
										</div>
									</FooterTemplate>
								</GridAggregateColumn>
								<GridAggregateColumn Field="BaseTotal" Type="AggregateType.Sum">
									<FooterTemplate>
										@{
											var aggregate = (context as AggregateTemplateContext);
											var sum = aggregate.Sum != null ? Convert.ToDecimal(aggregate.Sum) : 0m;
										}
										<div class="aggregate-value">
											<strong>@sum.ToString("N2")</strong>
										</div>
									</FooterTemplate>
								</GridAggregateColumn>
								<GridAggregateColumn Field="DiscountAmount" Type="AggregateType.Sum">
									<FooterTemplate>
										@{
											var aggregate = (context as AggregateTemplateContext);
											var sum = aggregate.Sum != null ? Convert.ToDecimal(aggregate.Sum) : 0m;
										}
										<div class="aggregate-value aggregate-discount">
											<strong>@sum.ToString("N2")</strong>
										</div>
									</FooterTemplate>
								</GridAggregateColumn>
								<GridAggregateColumn Field="AfterDiscount" Type="AggregateType.Sum">
									<FooterTemplate>
										@{
											var aggregate = (context as AggregateTemplateContext);
											var sum = aggregate.Sum != null ? Convert.ToDecimal(aggregate.Sum) : 0m;
										}
										<div class="aggregate-value">
											<strong>@sum.ToString("N2")</strong>
										</div>
									</FooterTemplate>
								</GridAggregateColumn>
								<GridAggregateColumn Field="CGSTAmount" Type="AggregateType.Sum">
									<FooterTemplate>
										@{
											var aggregate = (context as AggregateTemplateContext);
											var sum = aggregate.Sum != null ? Convert.ToDecimal(aggregate.Sum) : 0m;
										}
										<div class="aggregate-value">
											<strong>@sum.ToString("N2")</strong>
										</div>
									</FooterTemplate>
								</GridAggregateColumn>
								<GridAggregateColumn Field="SGSTAmount" Type="AggregateType.Sum">
									<FooterTemplate>
										@{
											var aggregate = (context as AggregateTemplateContext);
											var sum = aggregate.Sum != null ? Convert.ToDecimal(aggregate.Sum) : 0m;
										}
										<div class="aggregate-value">
											<strong>@sum.ToString("N2")</strong>
										</div>
									</FooterTemplate>
								</GridAggregateColumn>
								<GridAggregateColumn Field="IGSTAmount" Type="AggregateType.Sum">
									<FooterTemplate>
										@{
											var aggregate = (context as AggregateTemplateContext);
											var sum = aggregate.Sum != null ? Convert.ToDecimal(aggregate.Sum) : 0m;
										}
										<div class="aggregate-value">
											<strong>@sum.ToString("N2")</strong>
										</div>
									</FooterTemplate>
								</GridAggregateColumn>
								<GridAggregateColumn Field="TotalTaxAmount" Type="AggregateType.Sum">
									<FooterTemplate>
										@{
											var aggregate = (context as AggregateTemplateContext);
											var sum = aggregate.Sum != null ? Convert.ToDecimal(aggregate.Sum) : 0m;
										}
										<div class="aggregate-value">
											<strong>@sum.ToString("N2")</strong>
										</div>
									</FooterTemplate>
								</GridAggregateColumn>
								<GridAggregateColumn Field="Total" Type="AggregateType.Sum">
									<FooterTemplate>
										@{
											var aggregate = (context as AggregateTemplateContext);
											var sum = aggregate.Sum != null ? Convert.ToDecimal(aggregate.Sum) : 0m;
										}
										<div class="aggregate-value aggregate-total">
											<strong>@sum.ToString("N2")</strong>
										</div>
									</FooterTemplate>
								</GridAggregateColumn>
							</GridAggregateColumns>
						</GridAggregate>
					</GridAggregates>

					<GridColumns>
						<GridColumn HeaderText="Actions" Width="100" TextAlign="TextAlign.Center">
							<Template>
								@{
									var item = (context as dynamic);
									<div class="grid-actions">
										<button class="btn-grid-action btn-edit" @onclick="@(() => EditCartItem(item))" title="Edit Item (Insert)">
											<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
												 fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
												 stroke-linejoin="round">
												<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
												<path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" />
											</svg>
										</button>
										<button class="btn-grid-action btn-delete" @onclick="@(() => RemoveItemFromCart(item))" title="Remove Item (Del)">
											<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
												 fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
												 stroke-linejoin="round">
												<polyline points="3 6 5 6 21 6" />
												<path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
												<line x1="10" y1="11" x2="10" y2="17" />
												<line x1="14" y1="11" x2="14" y2="17" />
											</svg>
										</button>
									</div>
								}
							</Template>
						</GridColumn>
						<GridColumn Field="ItemName" HeaderText="Item Name" Width="200" />
						<GridColumn Field="Quantity" HeaderText="Qty" Width="100" TextAlign="TextAlign.Right" Format="N2" />
						<GridColumn Field="Rate" HeaderText="Rate" Width="110" TextAlign="TextAlign.Right" Format="N2" />
						<GridColumn Field="BaseTotal" HeaderText="Base Total" Width="150" TextAlign="TextAlign.Right" Format="N2" />
						<GridColumn Field="DiscountPercent" HeaderText="Disc %" Width="120" TextAlign="TextAlign.Right" Format="N2" />
						<GridColumn Field="DiscountAmount" HeaderText="Disc Amt" Width="140" TextAlign="TextAlign.Right" Format="N2">
							<Template>
								@{
									var item = (context as dynamic);
									<span class="grid-discount">@item.DiscountAmount.ToString("N2")</span>
								}
							</Template>
						</GridColumn>
						<GridColumn Field="AfterDiscount" HeaderText="After Disc" Width="140" TextAlign="TextAlign.Right" Format="N2" />
						<GridColumn Field="CGSTPercent" HeaderText="CGST %" Width="140" TextAlign="TextAlign.Right" Format="N2" />
						<GridColumn Field="CGSTAmount" HeaderText="CGST Amt" Width="150" TextAlign="TextAlign.Right" Format="N2" />
						<GridColumn Field="SGSTPercent" HeaderText="SGST %" Width="140" TextAlign="TextAlign.Right" Format="N2" />
						<GridColumn Field="SGSTAmount" HeaderText="SGST Amt" Width="150" TextAlign="TextAlign.Right" Format="N2" />
						<GridColumn Field="IGSTPercent" HeaderText="IGST %" Width="140" TextAlign="TextAlign.Right" Format="N2" />
						<GridColumn Field="IGSTAmount" HeaderText="IGST Amt" Width="150" TextAlign="TextAlign.Right" Format="N2" />
						<GridColumn Field="TotalTaxAmount" HeaderText="Tax Total" Width="150" TextAlign="TextAlign.Right" Format="N2" />
						<GridColumn Field="InclusiveTax" HeaderText="Tax Incl." Width="100" TextAlign="TextAlign.Center">
							<Template>
								@{
									var item = (context as dynamic);
									<span class="grid-checkbox">@(item.InclusiveTax ? "✓" : "–")</span>
								}
							</Template>
						</GridColumn>
						<GridColumn Field="Total" HeaderText="Total" Width="130" TextAlign="TextAlign.Right" Format="N2">
							<Template>
								@{
									var item = (context as dynamic);
									<span class="grid-total">@item.Total.ToString("N2")</span>
								}
							</Template>
						</GridColumn>
						<GridColumn Field="Remarks" HeaderText="Remarks" Width="150" />
					</GridColumns>
				</SfGrid>
			</div>
		</div>
	</div>
}

<SfToast @ref="_sfErrorToast" ID="_sfErrorToast" Title="@_errorTitle" Content="@_errorMessage" Timeout="5000">
	<ToastPosition X="Right" Y="Top" />
	<ToastShowAnimationSettings Effect="ToastEffect.SlideLeftIn" />
	<ToastHideAnimationSettings Effect="ToastEffect.SlideRightOut" />
	</SfToast>

<SfToast @ref="_sfSuccessToast" ID="_sfSuccessToast" Title="@_successTitle" Content="@_successMessage" Timeout="5000">
	<ToastPosition X="Right" Y="Top" />
	<ToastShowAnimationSettings Effect="ToastEffect.SlideLeftIn" />
	<ToastHideAnimationSettings Effect="ToastEffect.SlideRightOut" />
</SfToast>

<style>
	* {
		box-sizing: border-box;
	}

	/* Professional Header Section */
	.page-header {
		position: sticky;
		top: 0;
		z-index: 1000;
		background: #ffffff;
		border-bottom: 2px solid #e2e8f0;
		padding: 16px 32px;
		display: grid;
		grid-template-columns: 1fr auto 1fr;
		align-items: center;
		gap: 24px;
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
		min-height: 72px;
	}

	.header-left {
		display: flex;
		align-items: center;
		gap: 16px;
	}

	.header-logo {
		width: 40px;
		height: 40px;
		flex-shrink: 0;
	}

	.header-divider {
		width: 1px;
		height: 32px;
		background: #e2e8f0;
		flex-shrink: 0;
	}

	.header-text {
		display: flex;
		align-items: center;
		font-size: 16px;
		color: #0f172a;
		font-weight: 600;
	}

	.app-name {
		color: #0f172a;
		font-weight: 600;
		letter-spacing: 0.5px;
	}

	.header-center {
		text-align: center;
	}

	.page-title {
		font-size: 20px;
		font-weight: 600;
		color: #0f172a;
		margin: 0;
		letter-spacing: -0.3px;
	}

	.page-subtitle {
		font-size: 13px;
		color: #64748b;
		margin: 4px 0 0 0;
		font-weight: 400;
	}

	.header-right {
		display: flex;
		align-items: center;
		justify-content: flex-end;
		gap: 8px;
	}

	.btn-icon {
		width: 40px;
		height: 40px;
		display: flex;
		align-items: center;
		justify-content: center;
		border: 1px solid #e2e8f0;
		background: #ffffff;
		border-radius: 8px;
		cursor: pointer;
		transition: all 0.2s ease;
		color: #64748b;
	}

	.btn-icon:hover {
		background: #f8fafc;
		border-color: #3b82f6;
		color: #3b82f6;
	}

	.btn-icon:active {
		transform: scale(0.95);
	}

	.btn-icon-save {
		color: #10b981;
		border-color: #10b981;
	}

		.btn-icon-save:hover {
			background: #ecfdf5;
			border-color: #059669;
			color: #059669;
		}

	.btn-icon-pdf {
		color: #ef4444;
		border-color: #ef4444;
	}

		.btn-icon-pdf:hover {
			background: #fef2f2;
			border-color: #dc2626;
			color: #dc2626;
		}

	/* Main Container */
	.purchase-container {
		padding: 16px 32px;
		max-width: 1920px;
		margin: 0 auto;
		background: #f8fafc;
		min-height: calc(100vh - 72px);
	}

	/* Two Column Layout */
	.two-column-layout {
		display: flex;
		gap: 16px;
		margin-bottom: 16px;
	}

		.two-column-layout > :first-child {
			flex: 0 0 75%;
		}

		.two-column-layout > :last-child {
			flex: 0 0 calc(25% - 16px);
		}

	/* Section Card Styles */
	.section-card {
		background: #ffffff;
		border-radius: 12px;
		border: 1px solid #e2e8f0;
		box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
		margin-bottom: 16px;
		overflow: hidden;
	}

	.section-header {
		padding: 16px 20px;
		border-bottom: 1px solid #e2e8f0;
		background: linear-gradient(to bottom, #ffffff 0%, #f8fafc 100%);
	}

	.section-title-wrapper {
		display: flex;
		align-items: center;
		gap: 12px;
	}

	.section-icon {
		color: #3b82f6;
		flex-shrink: 0;
	}

	.section-title {
		font-size: 16px;
		font-weight: 600;
		color: #0f172a;
		margin: 0;
		letter-spacing: -0.2px;
	}

	.section-body {
		padding: 16px 20px;
	}

	/* Form Grid Layout */
	.form-grid {
		display: grid;
		grid-template-columns: repeat(2, 1fr);
		gap: 16px 20px;
	}

	.form-grid-single {
		display: grid;
		grid-template-columns: repeat(2, 1fr);
		gap: 16px 20px;
	}

	.form-grid-triple {
		display: grid;
		grid-template-columns: repeat(3, 1fr);
		gap: 16px 20px;
	}

	.form-field {
		display: flex;
		flex-direction: column;
		gap: 6px;
	}

	.form-field-full {
		grid-column: 1 / -1;
	}

	.field-label {
		font-size: 13px;
		font-weight: 600;
		color: #334155;
		letter-spacing: 0.1px;
		display: flex;
		align-items: center;
		gap: 4px;
	}

	.required {
		color: #ef4444;
		font-weight: 700;
	}

	/* Transaction Number with Auto-generate Checkbox */
	.transaction-no-wrapper {
		display: flex;
		gap: 12px;
		align-items: stretch;
	}

		.transaction-no-wrapper > :first-child {
			flex: 1;
		}

	/* Financial Grid Layout */
	.financial-grid {
		display: flex;
		flex-direction: column;
		gap: 6px;
	}

	.financial-row {
		display: grid;
		grid-template-columns: 100px 1fr;
		align-items: center;
		gap: 10px;
	}

	.financial-row-dual {
		display: grid;
		grid-template-columns: 100px 1fr;
		align-items: center;
		gap: 10px;
	}

	.dual-inputs {
		display: grid;
		grid-template-columns: 1.5fr 1.5fr;
		gap: 8px;
		align-items: center;
	}

	.financial-row.total-row {
		margin-top: 4px;
		padding-top: 8px;
		border-top: 2px solid #e2e8f0;
	}

	.financial-label {
		font-size: 13px;
		font-weight: 500;
		color: #475569;
		text-align: right;
		white-space: nowrap;
	}

	.financial-label-total {
		font-size: 14px;
		font-weight: 700;
		color: #0f172a;
		text-align: right;
		white-space: nowrap;
	}

	.financial-divider {
		height: 1px;
		background: #e2e8f0;
		margin: 4px 0;
	}

	/* Syncfusion Component Overrides */
	.custom-numeric .e-input {
		text-align: right;
	}

	.custom-numeric {
		padding-right: 16px;
	}

	::deep .custom-autocomplete,
	::deep .custom-datepicker,
	::deep .custom-textbox,
	::deep .custom-numeric {
		width: 100%;
	}

		::deep .custom-autocomplete .e-input-group,
		::deep .custom-datepicker .e-input-group,
		::deep .custom-textbox .e-input-group,
		::deep .custom-numeric .e-input-group {
			border: 1px solid #cbd5e1;
			border-radius: 6px;
			background: #ffffff;
			transition: all 0.2s ease;
			height: 40px;
		}

			::deep .custom-autocomplete .e-input-group:hover,
			::deep .custom-datepicker .e-input-group:hover,
			::deep .custom-textbox .e-input-group:hover,
			::deep .custom-numeric .e-input-group:not(.e-disabled):hover {
				border-color: #94a3b8;
			}

			::deep .custom-autocomplete .e-input-group.e-input-focus,
			::deep .custom-datepicker .e-input-group.e-input-focus,
			::deep .custom-textbox .e-input-group.e-input-focus,
			::deep .custom-numeric .e-input-group.e-input-focus {
				border-color: #3b82f6;
				box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
			}

			::deep .custom-autocomplete .e-input-group input,
			::deep .custom-datepicker .e-input-group input,
			::deep .custom-textbox .e-input-group input,
			::deep .custom-textbox .e-input-group textarea,
			::deep .custom-numeric .e-input-group input {
				font-size: 14px;
				color: #1e293b;
				padding: 8px 12px;
			}

				::deep .custom-autocomplete .e-input-group input::placeholder,
				::deep .custom-datepicker .e-input-group input::placeholder,
				::deep .custom-textbox .e-input-group input::placeholder,
				::deep .custom-textbox .e-input-group textarea::placeholder,
				::deep .custom-numeric .e-input-group input::placeholder {
					color: #94a3b8;
				}

	::deep .readonly-field .e-input-group {
		background: #f8fafc;
		cursor: not-allowed;
	}

		::deep .readonly-field .e-input-group input {
			color: #64748b;
			font-weight: 500;
		}

	::deep .editable-field .e-input-group {
		border-color: #3b82f6;
		background: #eff6ff;
	}

		::deep .editable-field .e-input-group input {
			font-weight: 600;
			color: #1e40af;
		}

	::deep .small-input .e-input-group {
		width: 100%;
	}

		::deep .small-input .e-input-group input {
			text-align: center;
			padding: 8px;
		}

	::deep .discount-field .e-input-group input {
		color: #dc2626;
		font-weight: 500;
	}

	::deep .total-field .e-input-group {
		background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
		border: 2px solid #3b82f6;
		height: 48px;
	}

		::deep .total-field .e-input-group input {
			font-size: 18px;
			font-weight: 700;
			color: #1e40af;
		}

	::deep .textarea-field .e-input-group {
		height: auto;
		min-height: 80px;
	}

		::deep .textarea-field .e-input-group textarea {
			resize: vertical;
			min-height: 80px;
		}

	::deep .textarea-field-small .e-input-group {
		height: auto;
		min-height: 60px;
	}

		::deep .textarea-field-small .e-input-group textarea {
			resize: vertical;
			min-height: 60px;
		}

	/* Add to Cart Section Styles */
	.cart-row {
		display: grid;
		grid-template-columns: 2fr repeat(7, 1fr) 1.5fr 100px;
		gap: 12px;
		align-items: end;
		margin-bottom: 12px;
	}

	.cart-field {
		display: flex;
		flex-direction: column;
		gap: 4px;
	}

	.cart-field-item {
		grid-column: span 2;
	}

	.cart-field-small {
		/* Standard single column */
	}

	.cart-field-medium {
		grid-column: span 1;
	}

	.cart-field-button {
		display: flex;
		align-items: flex-end;
	}

	.cart-label {
		font-size: 12px;
		font-weight: 600;
		color: #475569;
		text-transform: uppercase;
		letter-spacing: 0.3px;
	}

		.cart-label .required {
			color: #dc2626;
			margin-left: 2px;
		}

	::deep .cart-field .e-input-group,
	::deep .cart-field .custom-numeric .e-input-group,
	::deep .cart-field .custom-autocomplete .e-input-group,
	::deep .cart-field .custom-textbox .e-input-group {
		height: 38px;
		background: #eff6ff;
		border: 1px solid #3b82f6;
	}

		::deep .cart-field .e-input-group input,
		::deep .cart-field .custom-numeric .e-input-group input,
		::deep .cart-field .custom-autocomplete .e-input-group input,
		::deep .cart-field .custom-textbox .e-input-group input {
			font-size: 14px;
			font-weight: 500;
			color: #1e293b;
			padding: 8px 12px;
		}

	.btn-add {
		height: 38px;
		padding: 0 16px;
		display: flex;
		align-items: center;
		justify-content: center;
		gap: 6px;
		background: linear-gradient(135deg, #3b82f6 0%, #6366f1 100%);
		color: #ffffff;
		border: none;
		border-radius: 6px;
		font-weight: 600;
		font-size: 14px;
		cursor: pointer;
		transition: all 0.2s ease;
		box-shadow: 0 2px 4px rgba(59, 130, 246, 0.2);
		white-space: nowrap;
	}

		.btn-add:hover {
			transform: translateY(-1px);
			box-shadow: 0 4px 8px rgba(59, 130, 246, 0.3);
		}

		.btn-add:active {
			transform: scale(0.98);
		}

		.btn-add svg {
			flex-shrink: 0;
		}

	/* Checkbox Wrapper in Cart Row */
	.checkbox-wrapper {
		height: 38px;
		display: flex;
		align-items: center;
		padding: 0 12px;
		background: #f8fafc;
		border: 1px solid #cbd5e1;
		border-radius: 6px;
	}

	::deep .checkbox-wrapper .custom-checkbox {
		font-size: 13px;
		font-weight: 500;
	}

	/* Cart Amounts Row - Aligned with Input Fields Above */
	.cart-amounts-row {
		display: grid;
		grid-template-columns: 2fr repeat(7, 1fr) 1.5fr 100px;
		gap: 12px;
		margin-top: 8px;
	}

	.amount-field {
		display: flex;
		flex-direction: column;
	}

	.amount-field-item {
		grid-column: span 2;
	}

	.amount-field-small {
		/* Standard single column */
	}

	.amount-field-medium {
		grid-column: span 1;
	}

	.amount-field-button {
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.amount-display {
		display: flex;
		flex-direction: column;
		gap: 4px;
		padding: 8px 12px;
		background: #ffffff;
		border-radius: 6px;
		border: 1px solid #e2e8f0;
		min-height: 58px;
	}

		.amount-display.identification-field {
			padding: 0;
			background: transparent;
			border: none;
			min-height: 38px;
			justify-content: center;
		}

		.amount-display.empty-display {
			background: #f8fafc;
		}

		.amount-display.total-display {
			background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
			border: 2px solid #3b82f6;
		}

			.amount-display.total-display .amount-label {
				color: #1e40af;
			}

			.amount-display.total-display .amount-value {
				color: #1e40af;
				font-size: 16px;
			}

	::deep .identification-field .identification-input .e-input-group {
		height: 38px;
		background: #ffffff;
		border: 1px solid #cbd5e1;
	}

		::deep .identification-field .identification-input .e-input-group input {
			font-size: 13px;
			color: #64748b;
			font-weight: 500;
			padding: 8px 12px;
		}

			::deep .identification-field .identification-input .e-input-group input::placeholder {
				color: #94a3b8;
				font-style: italic;
			}

	.amount-label {
		font-size: 10px;
		font-weight: 600;
		color: #64748b;
		text-transform: uppercase;
		letter-spacing: 0.3px;
	}

	.amount-value {
		font-size: 14px;
		font-weight: 700;
		color: #1e293b;
		text-align: right;
		width: 100%;
		display: block;
	}

		.amount-value.discount-amt {
			color: #dc2626;
		}

	.checkbox-display {
		display: flex;
		align-items: center;
		justify-content: center;
		padding: 8px;
		background: #f8fafc;
		border-radius: 6px;
		border: 1px solid #e2e8f0;
		min-height: 58px;
	}

	::deep .custom-checkbox {
		font-size: 12px;
		font-weight: 500;
	}

		::deep .custom-checkbox label {
			white-space: nowrap;
		}

	/* Professional Grid Styles */
	.e-grid .e-summaryrow .e-summarycell {
		background-color: #deecf9;
	}

	.grid-body {
		padding: 0 !important;
	}

	::deep .professional-grid {
		border: none;
	}

		::deep .professional-grid .e-gridheader {
			background: linear-gradient(to bottom, #f8fafc 0%, #f1f5f9 100%);
			border-bottom: 2px solid #e2e8f0;
		}

		::deep .professional-grid .e-headercell {
			background: transparent;
			color: #475569;
			font-weight: 600;
			font-size: 12px;
			text-transform: uppercase;
			letter-spacing: 0.3px;
			border-right: 1px solid #e2e8f0;
			padding: 12px 8px;
		}

			::deep .professional-grid .e-headercell:last-child {
				border-right: none;
			}

		::deep .professional-grid .e-gridcontent {
			background: #ffffff;
		}

		::deep .professional-grid .e-row {
			transition: background-color 0.2s ease;
		}

			::deep .professional-grid .e-row:hover {
				background-color: #f8fafc;
			}

			::deep .professional-grid .e-row.e-altrow {
				background-color: #fafbfc;
			}

				::deep .professional-grid .e-row.e-altrow:hover {
					background-color: #f8fafc;
				}

		::deep .professional-grid .e-rowcell {
			border-right: 1px solid #f1f5f9;
			border-bottom: 1px solid #f1f5f9;
			padding: 10px 8px;
			font-size: 13px;
			color: #1e293b;
		}

			::deep .professional-grid .e-rowcell:last-child {
				border-right: none;
			}

	.grid-discount {
		color: #dc2626;
		font-weight: 600;
	}

	.grid-total {
		color: #1e40af;
		font-weight: 700;
		font-size: 14px;
	}

	.grid-checkbox {
		display: inline-block;
		width: 20px;
		height: 20px;
		line-height: 20px;
		text-align: center;
		border-radius: 4px;
		font-weight: 700;
		font-size: 14px;
	}

	/* Grid Footer Aggregates */
	::deep .professional-grid .e-gridfooter {
		background: linear-gradient(to bottom, #f1f5f9 0%, #e2e8f0 100%);
		border-top: 2px solid #cbd5e1;
	}

	::deep .professional-grid .e-summarycell {
		font-weight: 600;
		color: #1e293b;
		padding: 12px 8px;
		border-right: 1px solid #cbd5e1;
	}

		::deep .professional-grid .e-summarycell:last-child {
			border-right: none;
		}

	.aggregate-label {
		text-align: left;
		font-size: 13px;
		color: #475569;
	}

	.aggregate-value {
		text-align: right;
		font-size: 13px;
		color: #1e293b;
	}

		.aggregate-value.aggregate-discount {
			color: #dc2626;
		}

		.aggregate-value.aggregate-total {
			color: #1e40af;
			font-size: 14px;
		}

			.aggregate-value.aggregate-total strong {
				font-size: 15px;
			}

		.aggregate-label strong,
		.aggregate-value strong {
			font-weight: 700;
		}

	.grid-actions {
		display: flex;
		align-items: center;
		justify-content: center;
		gap: 6px;
	}

	.btn-grid-action {
		width: 32px;
		height: 32px;
		display: flex;
		align-items: center;
		justify-content: center;
		border: 1px solid #e2e8f0;
		background: #ffffff;
		border-radius: 6px;
		cursor: pointer;
		transition: all 0.2s ease;
		padding: 0;
	}

		.btn-grid-action:hover {
			transform: translateY(-1px);
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
		}

		.btn-grid-action:active {
			transform: scale(0.95);
		}

		.btn-grid-action.btn-edit {
			color: #3b82f6;
			border-color: #3b82f6;
		}

			.btn-grid-action.btn-edit:hover {
				background: #eff6ff;
				box-shadow: 0 2px 6px rgba(59, 130, 246, 0.2);
			}

		.btn-grid-action.btn-delete {
			color: #dc2626;
			border-color: #dc2626;
		}

			.btn-grid-action.btn-delete:hover {
				background: #fef2f2;
				box-shadow: 0 2px 6px rgba(220, 38, 38, 0.2);
			}

	/* Empty Grid State */
	::deep .professional-grid .e-emptyrow {
		text-align: center;
		padding: 48px 24px;
		color: #94a3b8;
		font-size: 14px;
	}
</style>


