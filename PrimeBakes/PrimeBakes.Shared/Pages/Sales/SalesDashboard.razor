@page "/sales"

@using PrimeBakes.Shared.Components.Button
@using PrimeBakesLibrary.Models.Common
@using static PrimeBakes.Shared.Components.Button.ButtonSize
@using static PrimeBakes.Shared.Components.Button.ButtonVariant
@using static PrimeBakes.Shared.Components.Button.IconType

<PageTitle>Sales - Prime Bakes</PageTitle>

@if (_isLoading)
{
    <SfSpinner @bind-Visible="_isLoading" Label="Page is Loading, Please Wait" />
}
else
{
    <PageHeader Title="Sales Dashboard"
                Subtitle="Access all sales modules and reports"
                ShowLogout="true"
                ShowHome="true"
                OnLogoutClick="Logout"
                OnHomeClick="NavigateToDashboard" />

    <!-- Main Content Container -->
    <div class="dashboard-container">

        <!-- Sales Modules Section -->
        <div class="section-card">
            <div class="section-header">
                <div class="section-title-wrapper">
                    <svg class="section-icon" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="9" cy="21" r="1" />
                        <circle cx="20" cy="21" r="1" />
                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" />
                    </svg>
                    <h2 class="section-title">Sales Operations</h2>
                </div>
                <p class="section-subtitle">Manage orders, sales, and returns</p>
            </div>
            <div class="section-body">
                <div class="dashboard-grid">
                    @if (_user.Order)
                    {
                        <!-- Order -->
                        <ButtonCard Title="Order" Description="Create and manage customer orders" Color="blue"
                            OnClick="() => NavigationManager.NavigateTo(PageRouteNames.Order)">
                            <IconContent>
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round">
                                    <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" />
                                    <rect x="8" y="2" width="8" height="4" rx="1" ry="1" />
                                </svg>
                            </IconContent>
                        </ButtonCard>
                    }

                    @if (_user.Sales)
                    {
                        <!-- Sale -->
                        <ButtonCard Title="Sale" Description="Process sales transactions" Color="green"
                            OnClick="() => NavigationManager.NavigateTo(PageRouteNames.Sale)">
                            <IconContent>
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round">
                                    <circle cx="9" cy="21" r="1" />
                                    <circle cx="20" cy="21" r="1" />
                                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" />
                                </svg>
                            </IconContent>
                        </ButtonCard>

                        <!-- Sale Return -->
                        <ButtonCard Title="Sale Return" Description="Process customer returns" Color="red"
                            OnClick="() => NavigationManager.NavigateTo(PageRouteNames.SaleReturn)">
                            <IconContent>
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round">
                                    <polyline points="9 14 4 9 9 4" />
                                    <path d="M20 20v-7a4 4 0 0 0-4-4H4" />
                                </svg>
                            </IconContent>
                        </ButtonCard>
                    }

                    @if (_user.Sales && _user.LocationId == 1)
                    {
                        <!-- Stock Transfer -->
                        <ButtonCard Title="Stock Transfer" Description="Transfer stock between locations" Color="amber"
                            OnClick="() => NavigationManager.NavigateTo(PageRouteNames.StockTransfer)">
                            <IconContent>
                                <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <polyline points="17 1 21 5 17 9" />
                                        <path d="M3 11V9a4 4 0 0 1 4-4h14" />
                                        <polyline points="7 23 3 19 7 15" />
                                        <path d="M21 13v2a4 4 0 0 1-4 4H3" />
                                    </svg>
                            </IconContent>
                        </ButtonCard>
                    }

                    @if (_user.Sales && _user.LocationId == 1)
                    {
                        <!-- Product Stock Adjustment -->
                        <ButtonCard Title="Finished Product Adjustment" Description="Adjust finished product stock levels" Color="indigo"
                            OnClick="() => NavigationManager.NavigateTo(PageRouteNames.ProductStockAdjustment)">
                            <IconContent>
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round">
                                    <polygon points="12 2 2 7 12 12 22 7 12 2" />
                                    <polyline points="2 17 12 22 22 17" />
                                    <polyline points="2 12 12 17 22 12" />
                                </svg>
                            </IconContent>
                        </ButtonCard>
                    }
                </div>
            </div>
        </div>

        <!-- Sales Reports Section -->
        <div class="section-card">
            <div class="section-header">
                <div class="section-title-wrapper">
                    <svg class="section-icon" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                        <polyline points="14 2 14 8 20 8" />
                        <line x1="16" y1="13" x2="8" y2="13" />
                        <line x1="16" y1="17" x2="8" y2="17" />
                        <line x1="12" y1="18" x2="12" y2="12" />
                    </svg>
                    <h2 class="section-title">Sales Reports</h2>
                </div>
                <p class="section-subtitle">View and analyze sales transaction reports</p>
            </div>
            <div class="section-body">
                <div class="dashboard-grid">
                    @if (_user.Order)
                    {
                        <!-- Order Report -->
                        <ButtonCard Title="Order Report" Description="View order transaction history" Color="cyan"
                            OnClick="() => NavigationManager.NavigateTo(PageRouteNames.ReportOrder)">
                            <IconContent>
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round">
                                    <polyline points="22 12 18 12 15 21 9 3 6 12 2 12" />
                                </svg>
                            </IconContent>
                        </ButtonCard>

                        <!-- Order Item Report -->
                        <ButtonCard Title="Order Item Report" Description="View detailed order items" Color="sky"
                            OnClick="() => NavigationManager.NavigateTo(PageRouteNames.ReportOrderItem)">
                            <IconContent>
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                                    <polyline points="14 2 14 8 20 8" />
                                    <line x1="16" y1="13" x2="8" y2="13" />
                                    <line x1="16" y1="17" x2="8" y2="17" />
                                    <line x1="10" y1="9" x2="8" y2="9" />
                                </svg>
                            </IconContent>
                        </ButtonCard>
                    }

                    @if (_user.Sales)
                    {
                        <!-- Sale Report -->
                        <ButtonCard Title="Sale Report" Description="View sales transaction history" Color="emerald"
                            OnClick="() => NavigationManager.NavigateTo(PageRouteNames.ReportSale)">
                            <IconContent>
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round">
                                    <line x1="22" y1="2" x2="11" y2="13" />
                                    <polygon points="22 2 15 22 11 13 2 9 22 2" />
                                </svg>
                            </IconContent>
                        </ButtonCard>

                        <!-- Sale Item Report -->
                        <ButtonCard Title="Sale Item Report" Description="View detailed sale items" Color="teal"
                            OnClick="() => NavigationManager.NavigateTo(PageRouteNames.ReportSaleItem)">
                            <IconContent>
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round">
                                    <line x1="8" y1="6" x2="21" y2="6" />
                                    <line x1="8" y1="12" x2="21" y2="12" />
                                    <line x1="8" y1="18" x2="21" y2="18" />
                                    <line x1="3" y1="6" x2="3.01" y2="6" />
                                    <line x1="3" y1="12" x2="3.01" y2="12" />
                                    <line x1="3" y1="18" x2="3.01" y2="18" />
                                </svg>
                            </IconContent>
                        </ButtonCard>

                        <!-- Sale Return Report -->
                        <ButtonCard Title="Sale Return Report" Description="View sales return records" Color="rose"
                            OnClick="() => NavigationManager.NavigateTo(PageRouteNames.ReportSaleReturn)">
                            <IconContent>
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round">
                                    <polyline points="23 18 13.5 8.5 8.5 13.5 1 6" />
                                    <polyline points="17 18 23 18 23 12" />
                                </svg>
                            </IconContent>
                        </ButtonCard>

                        <!-- Sale Return Item Report -->
                        <ButtonCard Title="Sale Return Item Report" Description="View detailed sale return items" Color="amber"
                            OnClick="() => NavigationManager.NavigateTo(PageRouteNames.ReportSaleReturnItem)">
                            <IconContent>
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                                    <polyline points="14 2 14 8 20 8" />
                                    <line x1="12" y1="18" x2="12" y2="12" />
                                    <line x1="12" y1="9" x2="12.01" y2="9" />
                                </svg>
                            </IconContent>
                        </ButtonCard>
                    }

                    @if (_user.Sales && _user.LocationId == 1)
                    {
                        <!-- Stock Transfer Report -->
                        <ButtonCard Title="Stock Transfer Report" Description="View stock transfer records" Color="orange"
                            OnClick="() => NavigationManager.NavigateTo(PageRouteNames.ReportStockTransfer)">
                            <IconContent>
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round">
                                    <polyline points="17 1 21 5 17 9" />
                                    <path d="M3 11V9a4 4 0 0 1 4-4h14" />
                                    <polyline points="7 23 3 19 7 15" />
                                    <path d="M21 13v2a4 4 0 0 1-4 4H3" />
                                </svg>
                            </IconContent>
                        </ButtonCard>

                        <!-- Stock Transfer Item Report -->
                        <ButtonCard Title="Stock Transfer Item Report" Description="View detailed transfer items" Color="violet"
                            OnClick="() => NavigationManager.NavigateTo(PageRouteNames.ReportStockTransferItem)">
                            <IconContent>
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                                    <polyline points="14 2 14 8 20 8" />
                                    <polyline points="9 17 14 12 19 17" />
                                    <line x1="14" y1="12" x2="14" y2="21" />
                                </svg>
                            </IconContent>
                        </ButtonCard>
                    }

                    @if (_user.Inventory && _user.LocationId == 1)
                    {
                        <!-- Product Stock Report -->
                        <ButtonCard Title="Finished Product Stock" Description="View current product stock levels" Color="indigo"
                            OnClick="() => NavigationManager.NavigateTo(PageRouteNames.ReportProductStock)">
                            <IconContent>
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round">
                                    <polyline points="21 8 21 21 3 21 3 8" />
                                    <rect x="1" y="3" width="22" height="5" />
                                    <line x1="10" y1="12" x2="14" y2="12" />
                                </svg>
                            </IconContent>
                        </ButtonCard>
                    }
                </div>
            </div>
        </div>

        @if (_user.Admin && _user.LocationId == 1)
        {
            <!-- Master Data Section -->
            <div class="section-card">
                <div class="section-header">
                    <div class="section-title-wrapper">
                        <svg class="section-icon" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"
                             fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="21 8 21 21 3 21 3 8" />
                            <rect x="1" y="3" width="22" height="5" />
                            <line x1="10" y1="12" x2="14" y2="12" />
                        </svg>
                        <h2 class="section-title">Master Data</h2>
                    </div>
                    <p class="section-subtitle">Manage products, categories, and pricing</p>
                </div>
                <div class="section-body">
                    <div class="dashboard-grid">
                        <!-- Finished Product -->
                        <ButtonCard Title="Finished Product" Description="Manage finished products" Color="emerald"
                            OnClick="() => NavigationManager.NavigateTo(PageRouteNames.AdminProduct)">
                            <IconContent>
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round">
                                    <polyline points="21 8 21 21 3 21 3 8" />
                                    <rect x="1" y="3" width="22" height="5" />
                                    <line x1="10" y1="12" x2="14" y2="12" />
                                </svg>
                            </IconContent>
                        </ButtonCard>

                        <!-- Product Location -->
                        <ButtonCard Title="Product Location" Description="Manage product locations" Color="sky"
                            OnClick="() => NavigationManager.NavigateTo(PageRouteNames.AdminProductLocation)">
                            <IconContent>
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round">
                                    <path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z" />
                                    <path d="m3.3 7 8.7 5 8.7-5" />
                                    <path d="M12 22V12" />
                                    <circle cx="12" cy="12" r="2" />
                                </svg>
                            </IconContent>
                        </ButtonCard>

                        <!-- Finished Product Category -->
                        <ButtonCard Title="Finished Product Category" Description="Manage product categories" Color="teal"
                            OnClick="() => NavigationManager.NavigateTo(PageRouteNames.AdminProductCategory)">
                            <IconContent>
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round">
                                    <line x1="8" y1="6" x2="21" y2="6" />
                                    <line x1="8" y1="12" x2="21" y2="12" />
                                    <line x1="8" y1="18" x2="21" y2="18" />
                                    <line x1="3" y1="6" x2="3.01" y2="6" />
                                    <line x1="3" y1="12" x2="3.01" y2="12" />
                                    <line x1="3" y1="18" x2="3.01" y2="18" />
                                </svg>
                            </IconContent>
                        </ButtonCard>

                        <!-- Tax -->
                        <ButtonCard Title="Tax" Description="Manage tax rates and types" Color="amber"
                            OnClick="() => NavigationManager.NavigateTo(PageRouteNames.AdminTax)">
                            <IconContent>
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round">
                                    <line x1="12" y1="1" x2="12" y2="23" />
                                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" />
                                </svg>
                            </IconContent>
                        </ButtonCard>
                    </div>
                </div>
            </div>
        }

    </div>
}

<style>
    * {
        box-sizing: border-box;
    }

    /* Dashboard Container */
    .dashboard-container {
        padding: 24px 32px;
        max-width: 1920px;
        margin: 0 auto;
        background: linear-gradient(to bottom, #f8fafc 0%, #f1f5f9 100%);
        min-height: calc(100vh - 72px);
    }

    /* Section Card */
    .section-card {
        background: #ffffff;
        border-radius: 12px;
        border: 1px solid #e2e8f0;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        margin-bottom: 24px;
        overflow: hidden;
        transition: all 0.3s ease;
    }

        .section-card:hover {
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08);
        }

    .section-header {
        padding: 20px 24px;
        border-bottom: 2px solid #e2e8f0;
        background: linear-gradient(to bottom, #ffffff 0%, #f8fafc 100%);
    }

    .section-title-wrapper {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 8px;
    }

    .section-icon {
        color: #3b82f6;
        flex-shrink: 0;
    }

    .section-title {
        font-size: 18px;
        font-weight: 600;
        color: #0f172a;
        margin: 0;
        letter-spacing: -0.3px;
    }

    .section-subtitle {
        font-size: 13px;
        color: #64748b;
        margin: 0;
        padding-left: 34px;
        font-weight: 400;
    }

    .section-body {
        padding: 24px;
    }

    /* Dashboard Grid */
    .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        gap: 16px;
    }
</style>