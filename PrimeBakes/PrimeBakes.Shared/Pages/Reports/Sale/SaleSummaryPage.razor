@page "/Reports/Sale/Summary"

@using PrimeBakesLibrary.Models.Sale
@using PrimeBakesLibrary.Models.Common
@using Syncfusion.Blazor.Calendars
@using Syncfusion.Blazor.Charts
@using Syncfusion.Blazor.DropDowns
@using Syncfusion.Blazor.Buttons
@using ChartLabelPosition = Syncfusion.Blazor.Charts.LabelPosition
@using PrimeBakes.Shared.Services

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />

<PageTitle>Sale Summary Report - PrimeBakes</PageTitle>

@if (_isLoading)
{
    <div class="loading-overlay">
        <div class="loading-content">
            <div class="circular-dots-loader">
                <span class="dot dot-1"></span>
                <span class="dot dot-2"></span>
                <span class="dot dot-3"></span>
            </div>
            <p class="loading-text">Loading Sale Summary...</p>
        </div>
    </div>
}
else
{
    <div class="sale-summary-container">
        <!-- Header Section -->
        <div class="page-header">
            <div class="header-content">
                <div class="header-title">
                    <div class="title-icon">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <div class="title-info">
                        <h1>Sale Summary Report</h1>
                        <p>Comprehensive sales analytics and performance insights</p>
                    </div>
                </div>
                
                <div class="header-actions">
                    <button @onclick='() => NavigationManager.NavigateTo("/Reports-Dashboard")' class="dashboard-btn">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Back to Dashboard</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Filter Section -->
        <div class="filter-section">
            <div class="filter-card">
                <div class="filter-header">
                    <h3><i class="fas fa-filter"></i> Filters</h3>
                </div>
                
                <div class="filter-controls">
                    <div class="filter-group">
                        <label class="filter-label">
                            <i class="fas fa-calendar-alt"></i>
                            Date Range
                        </label>
                        <SfDateRangePicker TValue="DateOnly"
                                          @bind-StartDate="_startDate"
                                          @bind-EndDate="_endDate"
                                          Format="dd/MM/yyyy"
                                          Placeholder="Select Date Range"
                                          CssClass="date-range-picker">
                            <DateRangePickerEvents TValue="DateOnly" ValueChange="OnDateRangeChanged" />
                        </SfDateRangePicker>
                    </div>
                    
                    @if (_user?.LocationId == 1)
                    {
                        <div class="filter-group">
                            <label class="filter-label">
                                <i class="fas fa-map-marker-alt"></i>
                                Location
                            </label>
                            <SfDropDownList TValue="int?" TItem="LocationModel"
                                           @bind-Value="_selectedLocationId"
                                           DataSource="_locations"
                                           Placeholder="Select Location"
                                           CssClass="location-dropdown">
                                <DropDownListFieldSettings Value="Id" Text="Name" />
                                <DropDownListEvents TValue="int?" TItem="LocationModel" ValueChange="OnLocationChanged" />
                            </SfDropDownList>
                        </div>
                    }
                </div>
                
                <div class="filter-actions">
                    <button @onclick="ToggleCharts" class="chart-toggle-btn @(_showCharts ? "active" : "")">
                        <i class="fas fa-chart-pie"></i>
                        <span>@(_showCharts ? "Hide Charts" : "Show Charts")</span>
                    </button>
                    
                    <button @onclick="ExportToExcel" class="export-btn" disabled="@_isProcessing">
                        <i class="fas fa-file-excel"></i>
                        <span>Export Excel</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Summary Cards Section -->
        <div class="summary-section">
            <div class="section-header">
                <h2><i class="fas fa-chart-line"></i> Sales Overview</h2>
                <div class="period-info">
                    @_startDate.ToString("dd MMM yyyy") - @_endDate.ToString("dd MMM yyyy")
                </div>
            </div>
            
            <div class="summary-cards">
                <!-- Total Sales Card -->
                <div class="summary-card highlight-card">
                    <div class="card-icon">
                        <i class="fas fa-rupee-sign"></i>
                    </div>
                    <div class="card-content">
                        <div class="card-value">₹@GetTotalSales().ToString("N2")</div>
                        <div class="card-label">Total Sales</div>
                        <div class="card-trend">
                            <i class="fas fa-arrow-up"></i>
                            <span>@_saleOverviews.Count transactions</span>
                        </div>
                    </div>
                </div>
                
                <!-- Total Quantity Card -->
                <div class="summary-card">
                    <div class="card-icon">
                        <i class="fas fa-cubes"></i>
                    </div>
                    <div class="card-content">
                        <div class="card-value">@GetTotalQuantity().ToString("N0")</div>
                        <div class="card-label">Total Quantity</div>
                        <div class="card-trend">
                            <i class="fas fa-box"></i>
                            <span>@GetTotalProducts() products</span>
                        </div>
                    </div>
                </div>
                
                <!-- Average Sale Card -->
                <div class="summary-card">
                    <div class="card-icon">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <div class="card-content">
                        <div class="card-value">₹@GetAverageSale().ToString("N2")</div>
                        <div class="card-label">Average Sale</div>
                        <div class="card-trend">
                            <i class="fas fa-chart-bar"></i>
                            <span>per transaction</span>
                        </div>
                    </div>
                </div>
                
                <!-- Tax Amount Card -->
                <div class="summary-card">
                    <div class="card-icon">
                        <i class="fas fa-percentage"></i>
                    </div>
                    <div class="card-content">
                        <div class="card-value">₹@GetTotalTax().ToString("N2")</div>
                        <div class="card-label">Total Tax</div>
                        <div class="card-trend">
                            <i class="fas fa-receipt"></i>
                            <span>GST collected</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Location-wise Summary Section -->
        <div class="location-summary-section">
            <div class="section-header">
                <h2><i class="fas fa-map-marked-alt"></i> Location Performance</h2>
            </div>
            
            <div class="location-cards">
                @foreach (var locationGroup in GetLocationSummary())
                {
                    <div class="location-card">
                        <div class="location-header">
                            <div class="location-icon">
                                <i class="fas fa-store"></i>
                            </div>
                            <div class="location-info">
                                <h4>@locationGroup.LocationName</h4>
                                <p>@locationGroup.SalesCount sales</p>
                            </div>
                        </div>
                        
                        <div class="location-stats">
                            <div class="stat-item">
                                <div class="stat-value">₹@locationGroup.TotalSales.ToString("N2")</div>
                                <div class="stat-label">Total Sales</div>
                            </div>
                            
                            <div class="stat-item">
                                <div class="stat-value">@locationGroup.TotalQuantity.ToString("N0")</div>
                                <div class="stat-label">Quantity</div>
                            </div>
                            
                            <div class="stat-item">
                                <div class="stat-value">₹@locationGroup.AverageSale.ToString("N2")</div>
                                <div class="stat-label">Avg. Sale</div>
                            </div>
                        </div>
                        
                        <div class="location-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: @(GetLocationPercentage(locationGroup.TotalSales))%"></div>
                            </div>
                            <div class="progress-label">@(GetLocationPercentage(locationGroup.TotalSales).ToString("N1"))% of total</div>
                        </div>
                    </div>
                }
                
                @if (!GetLocationSummary().Any())
                {
                    <div class="no-data-card">
                        <i class="fas fa-chart-line"></i>
                        <h4>No Sales Data</h4>
                        <p>No sales found for the selected date range and location.</p>
                    </div>
                }
            </div>
        </div>

        <!-- Tax Breakdown Section -->
        @if (_saleOverviews.Any())
        {
            <div class="breakdown-section">
                <div class="section-header">
                    <h2><i class="fas fa-receipt"></i> Tax Breakdown by Outlet</h2>
                </div>
                
                <div class="breakdown-grid">
                    @foreach (var taxGroup in GetTaxBreakdownByOutlet())
                    {
                        <div class="breakdown-card">
                            <div class="breakdown-header">
                                <h4>@taxGroup.LocationName</h4>
                                <div class="tax-total">₹@taxGroup.TotalTax.ToString("N2")</div>
                            </div>
                            <div class="breakdown-details">
                                <div class="tax-detail-row">
                                    <span>CGST:</span>
                                    <span>₹@taxGroup.CGST.ToString("N2")</span>
                                </div>
                                <div class="tax-detail-row">
                                    <span>SGST:</span>
                                    <span>₹@taxGroup.SGST.ToString("N2")</span>
                                </div>
                                <div class="tax-detail-row">
                                    <span>IGST:</span>
                                    <span>₹@taxGroup.IGST.ToString("N2")</span>
                                </div>
                                <div class="tax-progress">
                                    <div class="tax-progress-bar">
                                        <div class="tax-progress-fill" style="width: @(GetTaxPercentage(taxGroup.TotalTax))%"></div>
                                    </div>
                                    <span class="tax-percentage">@(GetTaxPercentage(taxGroup.TotalTax).ToString("N1"))% of total tax</span>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        }

        <!-- Payment Methods Breakdown Section -->
        @if (_saleOverviews.Any())
        {
            <div class="breakdown-section">
                <div class="section-header">
                    <h2><i class="fas fa-credit-card"></i> Payment Methods Breakdown by Outlet</h2>
                </div>
                
                <div class="payment-breakdown-grid">
                    @foreach (var outlet in GetLocationSummary())
                    {
                        var paymentBreakdown = GetPaymentBreakdownByOutlet(outlet.LocationName);
                        <div class="payment-breakdown-card">
                            <div class="payment-header">
                                <h4>@outlet.LocationName</h4>
                                <div class="outlet-total">₹@outlet.TotalSales.ToString("N2")</div>
                            </div>
                            <div class="payment-methods-grid">
                                <div class="payment-method-item">
                                    <div class="payment-icon cash">
                                        <i class="fas fa-money-bill-wave"></i>
                                    </div>
                                    <div class="payment-details">
                                        <span class="payment-label">Cash</span>
                                        <span class="payment-amount">₹@paymentBreakdown.Cash.ToString("N2")</span>
                                        <div class="payment-progress">
                                            <div class="payment-progress-fill cash-fill" style="width: @(GetPaymentPercentage(paymentBreakdown.Cash, outlet.TotalSales))%"></div>
                                        </div>
                                        <span class="payment-percentage">@(GetPaymentPercentage(paymentBreakdown.Cash, outlet.TotalSales).ToString("N1"))%</span>
                                    </div>
                                </div>
                                
                                <div class="payment-method-item">
                                    <div class="payment-icon card">
                                        <i class="fas fa-credit-card"></i>
                                    </div>
                                    <div class="payment-details">
                                        <span class="payment-label">Card</span>
                                        <span class="payment-amount">₹@paymentBreakdown.Card.ToString("N2")</span>
                                        <div class="payment-progress">
                                            <div class="payment-progress-fill card-fill" style="width: @(GetPaymentPercentage(paymentBreakdown.Card, outlet.TotalSales))%"></div>
                                        </div>
                                        <span class="payment-percentage">@(GetPaymentPercentage(paymentBreakdown.Card, outlet.TotalSales).ToString("N1"))%</span>
                                    </div>
                                </div>
                                
                                <div class="payment-method-item">
                                    <div class="payment-icon upi">
                                        <i class="fas fa-mobile-alt"></i>
                                    </div>
                                    <div class="payment-details">
                                        <span class="payment-label">UPI</span>
                                        <span class="payment-amount">₹@paymentBreakdown.UPI.ToString("N2")</span>
                                        <div class="payment-progress">
                                            <div class="payment-progress-fill upi-fill" style="width: @(GetPaymentPercentage(paymentBreakdown.UPI, outlet.TotalSales))%"></div>
                                        </div>
                                        <span class="payment-percentage">@(GetPaymentPercentage(paymentBreakdown.UPI, outlet.TotalSales).ToString("N1"))%</span>
                                    </div>
                                </div>
                                
                                <div class="payment-method-item">
                                    <div class="payment-icon credit">
                                        <i class="fas fa-handshake"></i>
                                    </div>
                                    <div class="payment-details">
                                        <span class="payment-label">Credit</span>
                                        <span class="payment-amount">₹@paymentBreakdown.Credit.ToString("N2")</span>
                                        <div class="payment-progress">
                                            <div class="payment-progress-fill credit-fill" style="width: @(GetPaymentPercentage(paymentBreakdown.Credit, outlet.TotalSales))%"></div>
                                        </div>
                                        <span class="payment-percentage">@(GetPaymentPercentage(paymentBreakdown.Credit, outlet.TotalSales).ToString("N1"))%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        }

        <!-- Additional Outlet Details Section -->
        @if (_saleOverviews.Any())
        {
            <div class="breakdown-section">
                <div class="section-header">
                    <h2><i class="fas fa-store"></i> Detailed Outlet Performance</h2>
                </div>
                
                <div class="outlet-details-grid">
                    @foreach (var outletDetails in GetDetailedOutletPerformance())
                    {
                        <div class="outlet-details-card">
                            <div class="outlet-details-header">
                                <h4>@outletDetails.LocationName</h4>
                                <div class="outlet-status @(outletDetails.PerformanceRating.ToLower())">
                                    @outletDetails.PerformanceRating
                                </div>
                            </div>
                            
                            <div class="outlet-metrics">
                                <div class="metric-row">
                                    <div class="metric-item">
                                        <span class="metric-label">Total Sales</span>
                                        <span class="metric-value">₹@outletDetails.TotalSales.ToString("N2")</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">Transactions</span>
                                        <span class="metric-value">@outletDetails.TransactionCount</span>
                                    </div>
                                </div>
                                
                                <div class="metric-row">
                                    <div class="metric-item">
                                        <span class="metric-label">Avg Transaction</span>
                                        <span class="metric-value">₹@outletDetails.AverageTransaction.ToString("N2")</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">Items Sold</span>
                                        <span class="metric-value">@outletDetails.TotalItems</span>
                                    </div>
                                </div>
                                
                                <div class="metric-row">
                                    <div class="metric-item">
                                        <span class="metric-label">Tax Collected</span>
                                        <span class="metric-value">₹@outletDetails.TotalTax.ToString("N2")</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">Net Sales</span>
                                        <span class="metric-value">₹@((outletDetails.TotalSales - outletDetails.TotalTax).ToString("N2"))</span>
                                    </div>
                                </div>
                                
                                <div class="peak-hours">
                                    <span class="metric-label">Peak Hour:</span>
                                    <span class="peak-time">@outletDetails.PeakHour</span>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        }

        <!-- Charts Section -->
        @if (_showCharts && _saleOverviews.Any())
        {
            <div class="charts-section">
                <div class="section-header">
                    <h2><i class="fas fa-chart-pie"></i> Sales Analytics</h2>
                </div>
                
                <div class="charts-grid">
                    <!-- Sales Trend Chart -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h4>Sales Trend</h4>
                            <p>Daily sales performance</p>
                        </div>
                        <div class="chart-container">
                            <SfChart>
                                <ChartArea>
                                    <ChartAreaBorder Width="0" />
                                </ChartArea>
                                <ChartPrimaryXAxis ValueType="Syncfusion.Blazor.Charts.ValueType.DateTime" 
                                                 LabelFormat="dd/MM"
                                                 IntervalType="IntervalType.Days">
                                    <ChartAxisLabelStyle Color="#666" />
                                </ChartPrimaryXAxis>
                                <ChartPrimaryYAxis LabelFormat="₹{value}">
                                    <ChartAxisLabelStyle Color="#666" />
                                </ChartPrimaryYAxis>
                                <ChartSeriesCollection>
                                    <ChartSeries DataSource="GetDailySalesData()" 
                                               XName="Date" 
                                               YName="Amount" 
                                               Type="ChartSeriesType.SplineArea"
                                               Name="Sales"
                                               Fill="#e2137b"
                                               Opacity="0.7">
                                        <ChartMarker Visible="true" Fill="#e2137b" />
                                    </ChartSeries>
                                </ChartSeriesCollection>
                                <ChartTooltipSettings Enable="true" Format="Date: ${point.x}<br/>Sales: ₹${point.y}" />
                            </SfChart>
                        </div>
                    </div>
                    
                    <!-- Payment Methods Chart -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h4>Payment Methods</h4>
                            <p>Payment distribution</p>
                        </div>
                        <div class="chart-container">
                            <SfChart>
                                <ChartArea>
                                    <ChartAreaBorder Width="0" />
                                </ChartArea>
                                <ChartPrimaryXAxis ValueType="Syncfusion.Blazor.Charts.ValueType.Category">
                                    <ChartAxisLabelStyle Color="#666" />
                                </ChartPrimaryXAxis>
                                <ChartPrimaryYAxis LabelFormat="₹{value}">
                                    <ChartAxisLabelStyle Color="#666" />
                                </ChartPrimaryYAxis>
                                <ChartSeriesCollection>
                                    <ChartSeries DataSource="GetPaymentMethodsData()" 
                                               XName="Method" 
                                               YName="Amount" 
                                               Type="ChartSeriesType.Column"
                                               Name="Payment Methods"
                                               Fill="#e2137b">
                                        <ChartMarker>
                                            <ChartDataLabel Visible="true" Position="ChartLabelPosition.Middle" Name="Percentage" />
                                        </ChartMarker>
                                    </ChartSeries>
                                </ChartSeriesCollection>
                                <ChartTooltipSettings Enable="true" Format="${point.x}: ₹${point.y}" />
                            </SfChart>
                        </div>
                    </div>
                    
                    <!-- Location Performance Chart -->
                    <div class="chart-card wide-chart">
                        <div class="chart-header">
                            <h4>Location Performance</h4>
                            <p>Sales comparison by location</p>
                        </div>
                        <div class="chart-container">
                            <SfChart>
                                <ChartArea>
                                    <ChartAreaBorder Width="0" />
                                </ChartArea>
                                <ChartPrimaryXAxis ValueType="Syncfusion.Blazor.Charts.ValueType.Category">
                                    <ChartAxisLabelStyle Color="#666" />
                                </ChartPrimaryXAxis>
                                <ChartPrimaryYAxis LabelFormat="₹{value}">
                                    <ChartAxisLabelStyle Color="#666" />
                                </ChartPrimaryYAxis>
                                <ChartSeriesCollection>
                                    <ChartSeries DataSource="GetLocationPerformanceData()" 
                                               XName="Location" 
                                               YName="Sales" 
                                               Type="ChartSeriesType.Column"
                                               Name="Sales"
                                               Fill="#e2137b">
                                        <ChartMarker>
                                            <ChartDataLabel Visible="true" Position="ChartLabelPosition.Middle" />
                                        </ChartMarker>
                                    </ChartSeries>
                                </ChartSeriesCollection>
                                <ChartTooltipSettings Enable="true" Format="${point.x}: ₹${point.y}" />
                            </SfChart>
                        </div>
                    </div>
                </div>
            </div>
        }
        else if (_showCharts && !_saleOverviews.Any())
        {
            <div class="no-charts-message">
                <div class="no-charts-content">
                    <i class="fas fa-chart-pie"></i>
                    <h3>No Data for Charts</h3>
                    <p>Charts will appear when sales data is available for the selected period.</p>
                </div>
            </div>
        }
    </div>
}

<style>
    :root {
        --primary-color: #e2137b;
        --primary-light: rgba(226, 19, 123, 0.1);
        --primary-dark: #c71068;
        --secondary-color: #f5c2d3;
        --accent-color: #ff6b9d;
        --success-color: #00c853;
        --warning-color: #ff9100;
        --danger-color: #ff1744;
        --dark-color: #2c2c54;
        --light-color: #fef7f9;
        --white: #ffffff;
        --shadow: 0 2px 8px rgba(226, 19, 123, 0.15);
        --shadow-lg: 0 8px 25px rgba(226, 19, 123, 0.2);
        --border-radius: 0.5rem;
        --border-radius-lg: 0.75rem;
        --transition: all 0.3s ease;
    }

    .sale-summary-container {
        padding: 20px;
        background: 
            radial-gradient(circle at 15% 15%, rgba(226, 19, 123, 0.05) 0%, transparent 50%),
            radial-gradient(circle at 85% 85%, rgba(83, 109, 254, 0.08) 0%, transparent 50%),
            linear-gradient(135deg, #fef7f9 0%, #fce4ec 30%, #f8bbd9 70%, #f48fb1 100%);
        min-height: 100vh;
        animation: fadeInUp 0.6s ease-out;
    }

    /* Loading States */
    .loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(255, 255, 255, 0.95);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        backdrop-filter: blur(8px);
    }

    .loading-content {
        text-align: center;
        padding: 40px;
        background: var(--white);
        border-radius: var(--border-radius-lg);
        box-shadow: var(--shadow-lg);
        border: 1px solid rgba(226, 19, 123, 0.1);
    }

    .circular-dots-loader {
        display: inline-block;
        position: relative;
        width: 60px;
        height: 60px;
        margin-bottom: 25px;
    }

    .circular-dots-loader .dot {
        display: block;
        position: absolute;
        width: 14px;
        height: 14px;
        border-radius: 50%;
        background: var(--primary-color);
        animation: dotPulse 1.4s infinite ease-in-out both;
    }

    .circular-dots-loader .dot-1 {
        top: 0;
        left: 50%;
        transform: translateX(-50%);
        animation-delay: -0.8s;
    }

    .circular-dots-loader .dot-2 {
        top: 50%;
        right: 0;
        transform: translateY(-50%);
        animation-delay: -0.4s;
    }

    .circular-dots-loader .dot-3 {
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        animation-delay: 0s;
    }

    .loading-text {
        color: var(--dark-color);
        font-size: 18px;
        font-weight: 600;
        margin: 0;
    }

    /* Header Section */
    .page-header {
        margin-bottom: 30px;
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        border-radius: var(--border-radius-lg);
        padding: 30px;
        color: var(--white);
        box-shadow: var(--shadow-lg);
        position: relative;
        overflow: hidden;
    }

    .page-header::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -20%;
        width: 200px;
        height: 200px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        animation: float 6s ease-in-out infinite;
    }

    .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: relative;
        z-index: 2;
    }

    .header-title {
        display: flex;
        align-items: center;
        gap: 20px;
    }

    .title-icon {
        width: 70px;
        height: 70px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 28px;
        backdrop-filter: blur(10px);
    }

    .title-info h1 {
        margin: 0 0 8px 0;
        font-size: 32px;
        font-weight: 700;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .title-info p {
        margin: 0;
        font-size: 16px;
        opacity: 0.9;
        font-weight: 400;
    }

    .dashboard-btn {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 14px 24px;
        background: rgba(255, 255, 255, 0.2);
        color: var(--white);
        border: none;
        border-radius: var(--border-radius);
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .dashboard-btn:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: translateY(-2px);
    }

    /* Filter Section */
    .filter-section {
        margin-bottom: 30px;
    }

    .filter-card {
        background: var(--white);
        border-radius: var(--border-radius-lg);
        padding: 25px;
        box-shadow: var(--shadow);
        border: 1px solid rgba(226, 19, 123, 0.1);
    }

    .filter-header h3 {
        display: flex;
        align-items: center;
        gap: 10px;
        margin: 0 0 20px 0;
        color: var(--primary-color);
        font-size: 18px;
        font-weight: 700;
    }

    .filter-controls {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
    }

    .filter-group {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }

    .filter-label {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
        font-weight: 600;
        color: var(--dark-color);
    }

    .filter-label i {
        color: var(--primary-color);
        width: 16px;
    }

    .filter-actions {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
    }

    .chart-toggle-btn, .export-btn {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 12px 20px;
        border: 2px solid var(--primary-color);
        background: transparent;
        color: var(--primary-color);
        border-radius: var(--border-radius);
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition);
    }

    .chart-toggle-btn:hover, .export-btn:hover {
        background: var(--primary-color);
        color: var(--white);
        transform: translateY(-2px);
    }

    .chart-toggle-btn.active {
        background: var(--primary-color);
        color: var(--white);
    }

    .export-btn {
        border-color: var(--success-color);
        color: var(--success-color);
    }

    .export-btn:hover {
        background: var(--success-color);
        color: var(--white);
    }

    /* Section Headers */
    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
    }

    .section-header h2 {
        display: flex;
        align-items: center;
        gap: 12px;
        font-size: 24px;
        font-weight: 700;
        color: var(--dark-color);
        margin: 0;
    }

    .section-header h2 i {
        color: var(--primary-color);
    }

    .period-info {
        background: var(--primary-light);
        color: var(--primary-color);
        padding: 8px 16px;
        border-radius: var(--border-radius);
        font-size: 14px;
        font-weight: 600;
        border: 1px solid rgba(226, 19, 123, 0.2);
    }

    /* Summary Cards */
    .summary-section {
        margin-bottom: 40px;
    }

    .summary-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
    }

    .summary-card {
        background: var(--white);
        border-radius: var(--border-radius-lg);
        padding: 25px;
        box-shadow: var(--shadow);
        border: 1px solid rgba(226, 19, 123, 0.1);
        transition: var(--transition);
        position: relative;
        overflow: hidden;
    }

    .summary-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    }

    .summary-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-lg);
    }

    .summary-card.highlight-card {
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        color: var(--white);
        border: none;
    }

    .summary-card.highlight-card::before {
        background: rgba(255, 255, 255, 0.3);
    }

    .summary-card {
        display: flex;
        align-items: center;
        gap: 20px;
    }

    .card-icon {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: var(--primary-light);
        color: var(--primary-color);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        flex-shrink: 0;
    }

    .highlight-card .card-icon {
        background: rgba(255, 255, 255, 0.2);
        color: var(--white);
    }

    .card-content {
        flex: 1;
    }

    .card-value {
        font-size: 28px;
        font-weight: 700;
        color: var(--primary-color);
        line-height: 1;
        margin-bottom: 8px;
    }

    .highlight-card .card-value {
        color: var(--white);
    }

    .card-label {
        font-size: 16px;
        font-weight: 600;
        color: var(--dark-color);
        margin-bottom: 6px;
    }

    .highlight-card .card-label {
        color: rgba(255, 255, 255, 0.9);
    }

    .card-trend {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 14px;
        color: var(--success-color);
        font-weight: 500;
    }

    .highlight-card .card-trend {
        color: rgba(255, 255, 255, 0.8);
    }

    /* Location Summary */
    .location-summary-section {
        margin-bottom: 40px;
    }

    .location-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 20px;
    }

    .location-card {
        background: var(--white);
        border-radius: var(--border-radius-lg);
        padding: 25px;
        box-shadow: var(--shadow);
        border: 1px solid rgba(226, 19, 123, 0.1);
        transition: var(--transition);
    }

    .location-card:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-lg);
    }

    .location-header {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 2px solid var(--primary-light);
    }

    .location-icon {
        width: 50px;
        height: 50px;
        background: var(--primary-light);
        color: var(--primary-color);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
    }

    .location-info h4 {
        margin: 0 0 5px 0;
        color: var(--dark-color);
        font-size: 18px;
        font-weight: 700;
    }

    .location-info p {
        margin: 0;
        color: var(--primary-color);
        font-size: 14px;
        font-weight: 600;
    }

    .location-stats {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 15px;
        margin-bottom: 20px;
    }

    .stat-item {
        text-align: center;
        padding: 15px 10px;
        background: #fef7f9;
        border-radius: var(--border-radius);
        border: 1px solid rgba(226, 19, 123, 0.1);
    }

    .stat-value {
        font-size: 18px;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 5px;
    }

    .stat-label {
        font-size: 12px;
        color: var(--dark-color);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .location-progress {
        text-align: center;
    }

    .progress-bar {
        width: 100%;
        height: 8px;
        background: #e8eaf6;
        border-radius: 4px;
        overflow: hidden;
        margin-bottom: 8px;
    }

    .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        border-radius: 4px;
        transition: width 1s ease;
    }

    .progress-label {
        font-size: 12px;
        color: var(--primary-color);
        font-weight: 600;
    }

    .no-data-card {
        grid-column: 1 / -1;
        text-align: center;
        padding: 60px 40px;
        background: var(--white);
        border-radius: var(--border-radius-lg);
        box-shadow: var(--shadow);
        border: 2px dashed rgba(226, 19, 123, 0.2);
    }

    .no-data-card i {
        font-size: 48px;
        color: var(--primary-color);
        opacity: 0.6;
        margin-bottom: 20px;
    }

    .no-data-card h4 {
        color: var(--dark-color);
        margin-bottom: 10px;
        font-size: 20px;
    }

    .no-data-card p {
        color: #666;
        margin: 0;
    }

    /* Charts Section */
    .charts-section {
        margin-bottom: 40px;
    }

    .charts-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 25px;
    }

    .chart-card {
        background: var(--white);
        border-radius: var(--border-radius-lg);
        padding: 25px;
        box-shadow: var(--shadow);
        border: 1px solid rgba(226, 19, 123, 0.1);
        transition: var(--transition);
    }

    .chart-card:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
    }

    .chart-card.wide-chart {
        grid-column: 1 / -1;
    }

    .chart-header {
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 2px solid var(--primary-light);
    }

    .chart-header h4 {
        margin: 0 0 5px 0;
        color: var(--dark-color);
        font-size: 18px;
        font-weight: 700;
    }

    .chart-header p {
        margin: 0;
        color: #666;
        font-size: 14px;
    }

    .chart-container {
        height: 300px;
    }

    .no-charts-message {
        background: var(--white);
        border-radius: var(--border-radius-lg);
        padding: 60px;
        text-align: center;
        box-shadow: var(--shadow);
        border: 2px dashed rgba(226, 19, 123, 0.2);
    }

    .no-charts-content i {
        font-size: 64px;
        color: var(--primary-color);
        opacity: 0.6;
        margin-bottom: 25px;
    }

    .no-charts-content h3 {
        color: var(--dark-color);
        margin-bottom: 15px;
        font-size: 24px;
    }

    .no-charts-content p {
        color: #666;
        margin: 0;
        font-size: 16px;
    }

    /* Animations */
    @@keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(40px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @@keyframes dotPulse {
        0%, 80%, 100% {
            transform: scale(0);
        }
        40% {
            transform: scale(1);
        }
    }

    @@keyframes float {
        0%, 100% {
            transform: translateY(0px);
        }
        50% {
            transform: translateY(-20px);
        }
    }

    /* Responsive Design */
    @@media (max-width: 1024px) {
        .charts-grid {
            grid-template-columns: 1fr;
        }
        
        .chart-card.wide-chart {
            grid-column: 1;
        }
        
        .summary-cards {
            grid-template-columns: repeat(2, 1fr);
        }
        
        .location-stats {
            grid-template-columns: 1fr;
            gap: 10px;
        }
    }

    @@media (max-width: 768px) {
        .sale-summary-container {
            padding: 15px;
        }
        
        .page-header {
            padding: 25px 20px;
        }
        
        .header-content {
            flex-direction: column;
            gap: 20px;
            text-align: center;
        }
        
        .title-info h1 {
            font-size: 28px;
        }
        
        .summary-cards {
            grid-template-columns: 1fr;
        }
        
        .location-cards {
            grid-template-columns: 1fr;
        }
        
        .filter-controls {
            grid-template-columns: 1fr;
        }
        
        .filter-actions {
            justify-content: center;
        }
    }

    @@media (max-width: 480px) {
        .sale-summary-container {
            padding: 10px;
        }
        
        .page-header {
            padding: 20px 15px;
        }
        
        .title-info h1 {
            font-size: 24px;
        }
        
        .title-icon {
            width: 60px;
            height: 60px;
            font-size: 24px;
        }
        
        .summary-card {
            flex-direction: column;
            text-align: center;
            gap: 15px;
        }
        
        .card-value {
            font-size: 24px;
        }
        
        .section-header {
            flex-direction: column;
            gap: 15px;
            text-align: center;
        }
    }

    /* Syncfusion Customizations */
    .e-daterangepicker.date-range-picker .e-input-group {
        border-color: rgba(226, 19, 123, 0.3);
        border-radius: var(--border-radius);
    }

    .e-daterangepicker.date-range-picker .e-input-group:focus-within {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(226, 19, 123, 0.2);
    }

    .e-dropdownlist.location-dropdown .e-input-group {
        border-color: rgba(226, 19, 123, 0.3);
        border-radius: var(--border-radius);
    }

    .e-dropdownlist.location-dropdown .e-input-group:focus-within {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(226, 19, 123, 0.2);
    }

    /* Breakdown Sections */
    .breakdown-section {
        margin: 30px 0;
    }

    .breakdown-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }

    .breakdown-card {
        background: white;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 15px rgba(226, 19, 123, 0.15);
        border: 1px solid rgba(226, 19, 123, 0.1);
        transition: all 0.3s ease;
    }

    .breakdown-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 25px rgba(226, 19, 123, 0.2);
    }

    .breakdown-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 2px solid rgba(226, 19, 123, 0.1);
    }

    .breakdown-header h4 {
        margin: 0;
        color: var(--dark-color);
        font-size: 18px;
        font-weight: 700;
    }

    .tax-total {
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        color: white;
        padding: 8px 15px;
        border-radius: 20px;
        font-size: 16px;
        font-weight: 700;
    }

    .breakdown-details {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    .tax-detail-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 0;
        border-bottom: 1px solid rgba(226, 19, 123, 0.1);
    }

    .tax-detail-row:last-child {
        border-bottom: none;
    }

    .tax-detail-row span:first-child {
        color: var(--text-color);
        font-weight: 600;
    }

    .tax-detail-row span:last-child {
        color: var(--primary-color);
        font-weight: 700;
        font-size: 16px;
    }

    .tax-progress {
        margin-top: 15px;
    }

    .tax-progress-bar {
        width: 100%;
        height: 8px;
        background: rgba(226, 19, 123, 0.1);
        border-radius: 4px;
        overflow: hidden;
        margin-bottom: 8px;
    }

    .tax-progress-fill {
        height: 100%;
        background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        border-radius: 4px;
        transition: width 0.3s ease;
    }

    .tax-percentage {
        font-size: 12px;
        color: var(--text-color);
        font-weight: 600;
    }

    /* Payment Methods Breakdown */
    .payment-breakdown-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
        gap: 25px;
        margin-top: 20px;
    }

    .payment-breakdown-card {
        background: white;
        border-radius: 12px;
        padding: 25px;
        box-shadow: 0 4px 15px rgba(226, 19, 123, 0.15);
        border: 1px solid rgba(226, 19, 123, 0.1);
        transition: all 0.3s ease;
    }

    .payment-breakdown-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 25px rgba(226, 19, 123, 0.2);
    }

    .payment-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 2px solid rgba(226, 19, 123, 0.1);
    }

    .payment-header h4 {
        margin: 0;
        color: var(--dark-color);
        font-size: 20px;
        font-weight: 700;
    }

    .outlet-total {
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        color: white;
        padding: 10px 18px;
        border-radius: 25px;
        font-size: 18px;
        font-weight: 700;
    }

    .payment-methods-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
    }

    .payment-method-item {
        background: #fef7f9;
        border-radius: 10px;
        padding: 20px;
        border: 1px solid rgba(226, 19, 123, 0.1);
        transition: all 0.3s ease;
    }

    .payment-method-item:hover {
        background: rgba(226, 19, 123, 0.05);
        border-color: rgba(226, 19, 123, 0.2);
    }

    .payment-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        margin-bottom: 15px;
        color: white;
    }

    .payment-icon.cash {
        background: linear-gradient(135deg, #27ae60, #2ecc71);
    }

    .payment-icon.card {
        background: linear-gradient(135deg, #3498db, #5dade2);
    }

    .payment-icon.upi {
        background: linear-gradient(135deg, #e74c3c, #ec7063);
    }

    .payment-icon.credit {
        background: linear-gradient(135deg, #f39c12, #f7dc6f);
    }

    .payment-details {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }

    .payment-label {
        font-size: 14px;
        color: var(--text-color);
        font-weight: 600;
    }

    .payment-amount {
        font-size: 18px;
        color: var(--primary-color);
        font-weight: 700;
    }

    .payment-progress {
        width: 100%;
        height: 6px;
        background: rgba(226, 19, 123, 0.1);
        border-radius: 3px;
        overflow: hidden;
        margin: 8px 0;
    }

    .payment-progress-fill {
        height: 100%;
        border-radius: 3px;
        transition: width 0.3s ease;
    }

    .cash-fill {
        background: linear-gradient(90deg, #27ae60, #2ecc71);
    }

    .card-fill {
        background: linear-gradient(90deg, #3498db, #5dade2);
    }

    .upi-fill {
        background: linear-gradient(90deg, #e74c3c, #ec7063);
    }

    .credit-fill {
        background: linear-gradient(90deg, #f39c12, #f7dc6f);
    }

    .payment-percentage {
        font-size: 12px;
        color: var(--text-color);
        font-weight: 600;
        text-align: center;
    }

    /* Outlet Details */
    .outlet-details-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 25px;
        margin-top: 20px;
    }

    .outlet-details-card {
        background: white;
        border-radius: 12px;
        padding: 25px;
        box-shadow: 0 4px 15px rgba(226, 19, 123, 0.15);
        border: 1px solid rgba(226, 19, 123, 0.1);
        transition: all 0.3s ease;
    }

    .outlet-details-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 25px rgba(226, 19, 123, 0.2);
    }

    .outlet-details-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 2px solid rgba(226, 19, 123, 0.1);
    }

    .outlet-details-header h4 {
        margin: 0;
        color: var(--dark-color);
        font-size: 20px;
        font-weight: 700;
    }

    .outlet-status {
        padding: 6px 15px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .outlet-status.excellent {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
    }

    .outlet-status.good {
        background: #cce7ff;
        color: #004085;
        border: 1px solid #b3d7ff;
    }

    .outlet-status.average {
        background: #fff3cd;
        color: #856404;
        border: 1px solid #ffeaa7;
    }

    .outlet-status.poor {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
    }

    .outlet-metrics {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }

    .metric-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
    }

    .metric-item {
        background: #fef7f9;
        padding: 15px;
        border-radius: 8px;
        border: 1px solid rgba(226, 19, 123, 0.1);
        text-align: center;
    }

    .metric-label {
        display: block;
        font-size: 12px;
        color: var(--text-color);
        font-weight: 600;
        margin-bottom: 8px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .metric-value {
        font-size: 18px;
        color: var(--primary-color);
        font-weight: 700;
    }

    .peak-hours {
        background: linear-gradient(135deg, rgba(226, 19, 123, 0.1), rgba(199, 16, 104, 0.1));
        padding: 15px;
        border-radius: 8px;
        text-align: center;
        border: 1px solid rgba(226, 19, 123, 0.2);
    }

    .peak-time {
        color: var(--primary-color);
        font-weight: 700;
        font-size: 16px;
    }

    /* Mobile Responsiveness for Breakdown Sections */
    @@media (max-width: 768px) {
        .breakdown-grid,
        .payment-breakdown-grid,
        .outlet-details-grid {
            grid-template-columns: 1fr;
        }

        .payment-methods-grid {
            grid-template-columns: 1fr;
        }

        .metric-row {
            grid-template-columns: 1fr;
        }

        .breakdown-header,
        .payment-header,
        .outlet-details-header {
            flex-direction: column;
            gap: 15px;
            text-align: center;
        }
    }
</style>
