<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PrimeBakes.Order.CartPage"
			 xmlns:expander="clr-namespace:Syncfusion.Maui.Expander;assembly=Syncfusion.Maui.Expander"
			 xmlns:input="clr-namespace:Syncfusion.Maui.Inputs;assembly=Syncfusion.Maui.Inputs"
			 xmlns:control="clr-namespace:PrimeBakes.Controls"
             Title="My Cart">

	<ContentPage.Resources>
		<ResourceDictionary>
			<!-- Color Scheme -->
			<Color x:Key="PrimaryColor">#6366F1</Color>
			<Color x:Key="SecondaryColor">#F3F4F6</Color>
			<Color x:Key="AccentColor">#10B981</Color>
			<Color x:Key="ErrorColor">#EF4444</Color>
			<Color x:Key="TextPrimary">#1F2937</Color>
			<Color x:Key="TextSecondary">#6B7280</Color>
			<Color x:Key="SurfaceColor">#FFFFFF</Color>
			<Color x:Key="BorderColor">#E5E7EB</Color>

			<!-- Styles -->
			<Style x:Key="CardStyle" TargetType="Border">
				<Setter Property="Stroke" Value="MediumPurple" />
				<Setter Property="StrokeThickness" Value="1" />
				<Setter Property="StrokeShape" Value="RoundRectangle 16" />
				<Setter Property="Margin" Value="16,8" />
				<Setter Property="Padding" Value="0" />
			</Style>

			<Style x:Key="HeaderLabelStyle" TargetType="Label">
				<Setter Property="FontSize" Value="18" />
				<Setter Property="FontFamily" Value="CascadiaCodeSemibold" />
				<Setter Property="FontAttributes" Value="Bold" />
				<Setter Property="TextColor" Value="MediumPurple" />
			</Style>

			<Style x:Key="BodyLabelStyle" TargetType="Label">
				<Setter Property="FontSize" Value="14" />
				<Setter Property="FontFamily" Value="CascadiaCodeRegular" />
			</Style>
		</ResourceDictionary>
	</ContentPage.Resources>

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="*" />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>

		<!-- Order Details Expander -->
		<Border Grid.Row="0" Style="{StaticResource CardStyle}">
			<expander:SfExpander IsExpanded="True"
                                 AnimationDuration="200">
				<expander:SfExpander.Header>
					<Grid Padding="20,16">
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="*"/>
							<ColumnDefinition Width="Auto"/>
						</Grid.ColumnDefinitions>

						<StackLayout Grid.Column="0" 
									 VerticalOptions="Center"
									 Spacing="2">
							<StackLayout VerticalOptions="Center" Spacing="2">
								<Label Text="Order Details" 
                                       Style="{StaticResource HeaderLabelStyle}" />
								<Label Text="Tap to expand or collapse" 
                                       Style="{StaticResource BodyLabelStyle}"
                                       FontSize="12" />
							</StackLayout>
						</StackLayout>
					</Grid>
				</expander:SfExpander.Header>

				<expander:SfExpander.Content>
					<StackLayout Padding="20,0,20,20" Spacing="16">
						<!-- Order Number -->
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="100"/>
								<ColumnDefinition Width="*"/>
							</Grid.ColumnDefinitions>

							<Label Text="Order No" 
                                   Style="{StaticResource BodyLabelStyle}"
                                   VerticalOptions="Center" />

							<Border Grid.Column="1" 
                                    StrokeShape="RoundRectangle 8"
                                    Padding="12,8">
								<Entry Text="YTFFGH676654" 
                                       x:Name="orderNoTextBox"
                                       IsReadOnly="True"
									   FontFamily="CascadiaCodeSemiBold"
                                       TextColor="MediumOrchid"
                                       FontSize="14"
                                       FontAttributes="Bold" />
							</Border>
						</Grid>

						<!-- Date -->
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="100"/>
								<ColumnDefinition Width="*"/>
							</Grid.ColumnDefinitions>

							<Label Text="Date" 
                                   Style="{StaticResource BodyLabelStyle}"
                                   VerticalOptions="Center" />

							<Border Grid.Column="1" 
                                    StrokeShape="RoundRectangle 8"
                                    Padding="12,8">
								<DatePicker x:Name="orderDatePicker"
											FontFamily="CascadiaCodeSemiBold"
                                            FontSize="14" />
							</Border>
						</Grid>

						<!-- Remarks -->
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="100"/>
								<ColumnDefinition Width="*"/>
							</Grid.ColumnDefinitions>

							<Label Text="Remarks" 
                                   Style="{StaticResource BodyLabelStyle}"
                                   VerticalOptions="Center"
                                   Margin="0,12,0,0" />

							<Border Grid.Column="1" 
                                    StrokeShape="RoundRectangle 8"
                                    Padding="12,8">
								<Entry x:Name="remarksTextBox"
                                       Placeholder="Add notes for this order..."
                                       FontFamily="CascadiaCodeSemiBold"
									   PlaceholderColor="MediumPurple"
                                       FontSize="14" />
							</Border>
						</Grid>

						<!-- Location -->
						<Grid x:Name="locationSelectionGrid">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="100"/>
								<ColumnDefinition Width="*"/>
							</Grid.ColumnDefinitions>

							<Label Text="Location" 
                                   Style="{StaticResource BodyLabelStyle}"
                                   VerticalOptions="Center" />

							<Border Grid.Column="1" 
                                    StrokeShape="RoundRectangle 8"
                                    Padding="4">
								<input:SfComboBox x:Name="locationComboBox" 
                                                  BackgroundColor="Transparent"
												  FontFamily="CascadiaRegular"
												  TextColor="MediumOrchid"
												  PlaceholderColor="MediumPurple"
                                                  FontSize="14"
                                                  Placeholder="Select location" />
							</Border>
						</Grid>
					</StackLayout>
				</expander:SfExpander.Content>
			</expander:SfExpander>
		</Border>

		<!-- Cart Items -->
		<ScrollView Grid.Row="1" 
                    Margin="10">
			<CollectionView x:Name="cartItemsCollectionView">
				<CollectionView.ItemTemplate>
					<DataTemplate>
						<Border Style="{StaticResource CardStyle}"
                                Margin="10,4">
							<Grid Padding="16" 
                                  RowSpacing="12">
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="*" />
									<ColumnDefinition Width="Auto" />
								</Grid.ColumnDefinitions>

								<!-- Product Name -->
								<Label Grid.Column="0"
                                       Text="{Binding ProductName}" 
									   FontFamily="CascadiaRegular"
                                       FontSize="16"
									   VerticalOptions="Center"/>

								<!-- Quantity and Remove Button -->
								<Grid Grid.Column="1">
									<Grid.ColumnDefinitions>
										<ColumnDefinition Width="Auto" />
										<ColumnDefinition Width="Auto" />
									</Grid.ColumnDefinitions>

									<!-- Quantity Control -->
									<input:SfNumericEntry x:Name="quantityNumericEntry"
														  Grid.Column="0"
														  Margin="8,0"
														  Padding="4"
														  Value="{Binding Quantity}"
														  CustomFormat="0" 
														  Background="Transparent"
														  AllowNull="False"
														  Minimum="0" 
														  UpDownPlacementMode="Inline"
														  MinimumWidthRequest="120"
														  HorizontalTextAlignment="Center"
														  TextColor="MediumPurple"
														  ValueChanged="quantityNumericEntry_ValueChanged" />

									<!-- Remove Button -->
									<Button Grid.Column="1" 
                                            Clicked="RemoveFromCartButton_Clicked" 
                                            BackgroundColor="{StaticResource ErrorColor}"
                                            TextColor="White"
                                            CornerRadius="20"
                                            WidthRequest="40"
                                            HeightRequest="40"
                                            FontSize="16"
                                            FontAttributes="Bold"
                                            Text="Ã—" />
								</Grid>
							</Grid>
						</Border>
					</DataTemplate>
				</CollectionView.ItemTemplate>
			</CollectionView>
		</ScrollView>

		<!-- Checkout Swipe Button -->
		<control:MySlideView Grid.Row="2"
								 Margin="10"
								 HeightRequest="64" 
                                 SlideCompleted="SlideCompleted">
			<control:MySlideView.MyThumb>
				<Border StrokeShape="RoundRectangle 60"
                            StrokeThickness="0" 
                            BackgroundColor="{StaticResource SurfaceColor}"
                            Margin="2"
                            HeightRequest="56" 
                            WidthRequest="56"
                            x:Name="myframe">
					<Border.Shadow>
						<Shadow Brush="MediumPurple"
                                    Offset="0,2"
                                    Radius="8"
                                    Opacity="1" />
					</Border.Shadow>

					<Label Text="ðŸ›’" 
                               FontSize="24"
                               HorizontalOptions="Center"
                               VerticalOptions="Center" />
				</Border>
			</control:MySlideView.MyThumb>

			<control:MySlideView.MyTrackBar>
				<Border StrokeShape="RoundRectangle 60" 
                            StrokeThickness="0" 
                            BackgroundColor="{StaticResource TextSecondary}"
                            Padding="0">
					<Label TextColor="White" 
                               x:Name="cartItemsLabel" 
                               Text="SWIPE TO CHECKOUT" 
                               FontSize="16"
							   FontFamily="CascadiaCodeSemiBold"
                               FontAttributes="Bold"
                               HorizontalOptions="Center" 
                               VerticalOptions="Center" />
				</Border>
			</control:MySlideView.MyTrackBar>

			<control:MySlideView.MyFillBar>
				<Border  StrokeShape="RoundRectangle 60,60,60,60" StrokeThickness="0" BackgroundColor="MediumPurple">
					<Label Text="âœ“ CHECKOUT" 
						   FontSize="16"
						   FontFamily="CascadiaSemiBold"
						   FontAttributes="Bold"
						   TextColor="White"
						   HorizontalOptions="Center" 
						   VerticalOptions="Center" />
				</Border>
			</control:MySlideView.MyFillBar>
		</control:MySlideView>
	</Grid>
</ContentPage>